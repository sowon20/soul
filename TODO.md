## í•­ìƒ ì‘ì—… ì „ í™•ì¸ / ì‘ì—… í›„ ì—…ë°ì´íŠ¸í•  ê²ƒ! : ì²´í¬ ë° ì¤‘ìš”ë©”ëª¨

---

## âœ… ì™„ë£Œ: ë²¡í„° ê²€ìƒ‰ êµ¬í˜„ (2026-01-27)

### ë¬¸ì œ
- recall_memoryê°€ í‚¤ì›Œë“œ ê²€ìƒ‰ â†’ ì˜ë¯¸ì  ìœ ì‚¬ë„ ëª» ì°¾ìŒ
- "ì²˜ìŒ ë§Œë‚¨" ê²€ìƒ‰í•´ë„ "ì²« ëŒ€í™”" ëª» ì°¾ìŒ

### í•´ê²°: ChromaDB + ë¡œì»¬ ì„ë² ë”©
- [x] ChromaDB ì„¤ì¹˜ (`pip install chromadb`)
- [x] ChromaDB ì„œë²„ ì‹¤í–‰ (`chroma run --path ./data/chroma --port 8000`)
- [x] Node.js í´ë¼ì´ì–¸íŠ¸ (`npm install chromadb`)
- [x] ë¡œì»¬ ì„ë² ë”© ëª¨ë¸ (`@xenova/transformers` + `all-MiniLM-L6-v2`)
- [x] `vector-store.js` ìœ í‹¸ ìƒì„±
- [x] ê¸°ì¡´ ë©”ì‹œì§€ 112ê°œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
- [x] `builtin-tools.js` recall_memory â†’ ë²¡í„° ê²€ìƒ‰ìœ¼ë¡œ êµì²´
- [x] `memory-layers.js` ìƒˆ ë©”ì‹œì§€ ì €ì¥ ì‹œ ë²¡í„° ìë™ ì €ì¥

### í…ŒìŠ¤íŠ¸ ê²°ê³¼
- "ì²˜ìŒ ë§Œë‚¨" ê²€ìƒ‰ â†’ "ì²˜ìŒ ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš”" ì°¾ìŒ (similarity 0.414)
- "ì²« ëŒ€í™”" ë„ ì°¾ìŒ (similarity 0.073)
- ì˜ë¯¸ì  ìœ ì‚¬ë„ ê²€ìƒ‰ ì‘ë™ í™•ì¸!

### ì£¼ì˜ì‚¬í•­
- ChromaDB ì„œë²„ í•„ìš”: `nohup chroma run --path ./data/chroma --port 8000 &`
- ì„œë²„ ì¬ì‹œì‘ ì‹œ ChromaDBë„ ë„ì›Œì•¼ í•¨
- TODO: systemd ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ê±°ë‚˜ pm2ì— ì¶”ê°€

---

## ğŸš¨ ì„¤ê³„ ì›ì¹™ (ì ˆëŒ€ ê·œì¹™)

### ê¸ˆì§€ ì‚¬í•­
- âŒ **ë°±ê·¸ë¼ìš´ë“œ ì£¼ê¸° ì‹¤í–‰** - ê³„ì† ëŒë©´ì„œ ì²´í¬í•˜ëŠ” ê²ƒ ê¸ˆì§€
- âŒ **í•˜ë“œì½”ë”©** - ì„¤ì •ê°’, URL, í‚¤ ë“± ì½”ë“œì— ì§ì ‘ ë°•ê¸° ê¸ˆì§€
- âŒ **íœ˜ë°œì„± ì €ì¥** - ì„œë²„ êº¼ì§€ë©´ ë‚ ì•„ê°€ëŠ” ë©”ëª¨ë¦¬/ë³€ìˆ˜ ì €ì¥ ê¸ˆì§€

### í•„ìˆ˜ ì‚¬í•­
- âœ… **ì´ë²¤íŠ¸ ê¸°ë°˜** - í•„ìš”í•  ë•Œë§Œ ì‹¤í–‰ (setTimeout OK, setInterval ìµœì†Œí™”)
- âœ… **DB ì„¤ì •** - ëª¨ë“  ì„¤ì •ê°’ì€ MongoDBì— ì €ì¥
- âœ… **DB ì˜ì†ì„±** - ì¤‘ìš” ë°ì´í„°ëŠ” ë°˜ë“œì‹œ MongoDB
- âœ… **ì„œë²„ ë³µêµ¬** - ì‹œì‘ ì‹œ DBì—ì„œ ìƒíƒœ ë³µêµ¬

### AI í˜¸ì¶œ ì›ì¹™
| ì‘ì—… ìœ í˜• | ì²˜ë¦¬ ë°©ì‹ |
|-----------|-----------|
| ë‹¨ìˆœ ì‹œê°„/ì¡°ê±´ ì²´í¬ | Node.js (setTimeout, DB ì¿¼ë¦¬) |
| ì§€ëŠ¥ì  íŒë‹¨ (ë°±ê·¸ë¼ìš´ë“œ) | **ë¡œì»¬ LLM** |
| ì‚¬ìš©ì ëŒ€í™” ì‘ë‹µ | **ì„¤ì •ëœ ê²½ëŸ‰ ëª¨ë¸** |

## ğŸ§¹ ë¦¬íŒ©í† ë§ í•„ìš” (Phase 4 ì´í›„)
- [x] ì „ì²´ ì½”ë“œ í•˜ë“œì½”ë”© ì ê²€ (ê²½ë¡œ, URL, ì„¤ì •ê°’) âœ… 2026-01-27 ì™„ë£Œ
- [x] ì¤‘ë³µ ì½”ë“œ ìœ í‹¸ë¡œ ë¶„ë¦¬ (api-keys.js, backfill-tags.js í†µí•©) âœ… 2026-01-27 ì™„ë£Œ
- [x] ê°œì¸ì •ë³´ ì œê±° (sowon â†’ default) âœ… 2026-01-27 ì™„ë£Œ
- [ ] ì•ˆ ì“°ëŠ” ì½”ë“œ/íŒŒì¼ ì‚­ì œ
- [ ] íŒ¨í„´ ì¼ê´€ì„± í†µì¼ (ì—ëŸ¬ ì²˜ë¦¬, ì‘ë‹µ í˜•ì‹ ë“±)
- [x] conversation-store.js ì™¸ ë‹¤ë¥¸ íŒŒì¼ë„ ì„¤ì • ì—°ë™ ì ê²€ âœ…

## ğŸ§  ìê¸°í•™ìŠµ ê·œì¹™ ì‹œìŠ¤í…œ (Phase 4 í•µì‹¬) â­â­â­
Soulì´ ëŒ€í™”í•˜ë©´ì„œ ìŠ¤ìŠ¤ë¡œ ê·œì¹™ì„ ë§Œë“¤ê³  í•™ìŠµí•˜ëŠ” ì‹œìŠ¤í…œ

### ê°œë…
- ëŒ€í™” ì¤‘ ê¹¨ë‹¬ì€ ê²ƒ â†’ ìê¸° ê·œì¹™ìœ¼ë¡œ ì €ì¥
- "ì†Œì›ì´ëŠ” ì´ê±° ëª¨ë¦„" â†’ "ì•Œì•„ì„œ ë‹¤ ì°¾ì•„ë³´ê¸°"
- "ì´ë ‡ê²Œ í–ˆë”ë‹ˆ í˜¼ë‚¨" â†’ "ë‹¤ìŒì—” ì•ˆ í•¨"
- ë§¤ ëŒ€í™”ë§ˆë‹¤ ê´€ë ¨ ê·œì¹™ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ìë™ ì£¼ì…

### í† í° ê´€ë¦¬
- [ ] ê·œì¹™ ì••ì¶• - ë¹„ìŠ·í•œ ê±´ ë¡œì»¬ LLMì´ ë³‘í•©
- [ ] ì¤‘ìš”ë„ ê´€ë¦¬ - ìì£¼ ì“°ì´ë©´ í™œì„±, ì•ˆ ì“°ì´ë©´ ì•„ì¹´ì´ë¸Œ
- [ ] ì¹´í…Œê³ ë¦¬ë³„ ë¡œë“œ - ìƒí™©ì— ë§ëŠ” ê·œì¹™ë§Œ (ì‹œìŠ¤í…œ/ì½”ë”©/ì¼ìƒ)
- [ ] í† í° ìƒí•œì„  - ê·œì¹™ ìµœëŒ€ 500í† í°, ë„˜ìœ¼ë©´ ìë™ ì••ì¶•

### êµ¬í˜„
- [ ] self_rules ì»¬ë ‰ì…˜ (MongoDB)
- [ ] ê·œì¹™ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ API
- [ ] ëŒ€í™” í›„ ë¡œì»¬ LLMì´ ê·œì¹™ ì¶”ì¶œ
- [ ] ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë¹Œë”ì—ì„œ ê·œì¹™ ì£¼ì…
- [ ] ê·œì¹™ ì••ì¶•/ë³‘í•© ë¡œì§

## ğŸ”¥ ìµœê·¼ ì‘ì—… í˜„í™© (2026-01-28)

### âœ… ì˜¤ëŠ˜ ì™„ë£Œ - UI ê°œì„  ë° ì„¤ì • êµ¬ì¡° ì •ë¦¬

- **ì„¼í„° ë©”ë‰´ ë²„íŠ¼ ì •ë¦¬**
  - ëŒ€ì‹œë³´ë“œ, AI, APP, ì„œë²„ 4ê°œ ë²„íŠ¼
  - ê° ë²„íŠ¼ì´ í•´ë‹¹ í˜ì´ì§€ë¡œ ì§ì ‘ ì´ë™
  - ì„œë²„ ìƒíƒœ í˜ì´ì§€ ë¶„ë¦¬ (ëŒ€ì‹œë³´ë“œì—ì„œ ì´ë™)

- **ì„¤ì • í˜ì´ì§€ íƒ­ ì œê±°**
  - settings-manager.js: ìƒë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ ì œê±°
  - ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì§ì ‘ í•´ë‹¹ ì„¤ì • í˜ì´ì§€ ì´ë™
  - app-settings.js: ë‚´ë¶€ ì„œë¸Œíƒ­ ì œê±°

- **ëŒ€ì‹œë³´ë“œ/AIì„¤ì • ìŠ¤íƒ€ì¼ ê°œì„ **
  - ë°•ìŠ¤ ë°°ê²½ ì œê±°, 100% ë„ˆë¹„
  - settings-section ë°°ê²½ transparent

- **í†µê³„ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½**
  - ì´ëª¨ì§€(ğŸ”„, ğŸ—‘ï¸) â†’ í…ìŠ¤íŠ¸("ìƒˆë¡œê³ ì¹¨", "ì´ˆê¸°í™”")
  - ë°•ìŠ¤ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½
  - ë¡œë”© ì‹œ ìŠ¤í”¼ë„ˆ ëŒ€ì‹  "ë¡œë”©..." í…ìŠ¤íŠ¸

- **ì˜ˆìƒ ë¹„ìš© í†µí™” ì„¤ì •**
  - í˜¸ë²„ ì‹œ $â†”â‚© ë“œë¡­ë‹¤ìš´
  - í™˜ìœ¨ API ì—°ë™ (exchangerate-api.com)
  - í†µí™” ì„¤ì • DB ì €ì¥ (/api/config/preferences)

- **ê¸°íƒ€ UI ê°œì„ **
  - í† í° ì‚¬ìš©ëŸ‰ ğŸ”¥ ì œê±°
  - +New page ë²„íŠ¼ ì œê±°
  - í”„ë¡œí•„ ë‹‰ë„¤ì„ í‘œì‹œ ì¶”ê°€ (center-card ìƒë‹¨)
  - ì›¹ì†Œì¼“ ìƒíƒœ ì„œë²„ í˜ì´ì§€ ë°˜ì˜

- **ì•±ì„¤ì • TODO ë©”ëª¨ ì¶”ê°€**
  - ê¸°ë³¸ í˜¸ìŠ¤íŠ¸ëª… home.soul ë¡œ í•˜ê¸°
  - ë„ë©”ì¸ ì„¤ì • í¼ ë§Œë“¤ê¸°

- **ì»¤ë°‹**: `2f2747a`

---

## ğŸ”¥ ì´ì „ ì‘ì—… í˜„í™© (2026-01-27)

### âœ… ì™„ë£Œ (ì €ë…) - í•˜ë“œì½”ë”© ì œê±° ë° ê°œì¸ì •ë³´ ì •ë¦¬ â­â­â­
> âš ï¸ **ì£¼ì˜**: ë‹¤ë¥¸ Claude Code ì„¸ì…˜ì´ íŒŒì¼ ì‚­ì œí•´ì„œ 6ì‹œê°„ ì‘ì—… ì†ì‹¤ë¨. ëŒ€í™” ë¡œê·¸ì—ì„œ ë³µêµ¬ ì§„í–‰.

- **í•˜ë“œì½”ë”© ì œê±°**
  - `vite.config.js`: `VITE_API_URL` í™˜ê²½ë³€ìˆ˜ ì§€ì›
  - `socket-client.js`: Vite dev(5173) í¬íŠ¸ ì§€ì›
  - `Profile.js`: userId ê¸°ë³¸ê°’ 'sowon' â†’ 'default'
  - `update-role-models.js`: dotenv ì„¤ì • ì¶”ê°€

- **ê°œì¸ì •ë³´ ì œê±°**
  - ì†Œì›/sowon â†’ User/default ë³€ê²½
  - `mcp/server-config.json`: ê°œì¸ MCP URL ì œê±°, ë¹ˆ ì„¤ì •ìœ¼ë¡œ ì´ˆê¸°í™”
  - `server-config.example.json` ì˜ˆì œ íŒŒì¼ ì¶”ê°€

- **ìŠ¤í¬ë¦½íŠ¸ í†µí•© (ì¤‘ë³µ ì œê±°)**
  - `api-keys.js` í†µí•© (setup/update/migrate/status ê¸°ëŠ¥)
    - ì‚­ì œ: setup-api-keys.js, update-api-keys.js, migrate-api-keys.js
  - `backfill-tags.js` í†µí•© (standalone/alba-worker ëª¨ë“œ)
    - ì‚­ì œ: backfill-tags-standalone.js

- **WebSocket ì—°ê²° ìˆ˜ì •**
  - socket-client.js: Vite dev(5173), ë¹Œë“œ(3080) â†’ ë°±ì—”ë“œ(3001) ì—°ê²°
  - ëŒ€ì‹œë³´ë“œ WebSocket ì¸ë””ì¼€ì´í„° ì—°ë™

- **ê¸°íƒ€**
  - `.env.example`: AI API í‚¤ ì„¤ì • ì„¹ì…˜ ì¶”ê°€
  - `dashboard-manager.js`: ì„œë²„ ìƒíƒœ ë° AI ì‚¬ìš© í†µê³„ ì™„ì „ ë³µêµ¬ (íŒŒì¼ ì†ìƒë¨)

- **ì»¤ë°‹**: `7628fed` (43íŒŒì¼, +2872/-937)

### âœ… ì˜¤ëŠ˜ ì™„ë£Œ (ìƒˆë²½ 3ì‹œ)
- **SSH Commander MCP ì—°ë™**
  - /tools, /logs API ì¶”ê°€
  - ì›¹ì†Œì¼“ ì‹¤ì‹œê°„ ì—°ë™ (AI ëª…ë ¹ [AI] ë°°ì§€ í‘œì‹œ)
  - í„°ë¯¸ë„ ì—´ë©´ ì´ì „ ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°
- **ë„êµ¬ ì‚¬ìš© UI ê¸°ë³¸ êµ¬í˜„**
  - tool_use íƒœê·¸ë¡œ ì‘ë‹µì— í¬í•¨
  - ğŸ”§ ë„êµ¬ ì‚¬ìš© í† ê¸€ ë²„íŠ¼
- **ë©”ëª¨ë¦¬ ê²½ë¡œ ì„¤ì • ìˆ˜ì •**
  - conversation-store.jsê°€ DB ì„¤ì • ê²½ë¡œ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •

### ğŸ”² ë‹¤ìŒ í•  ê²ƒ - ë„êµ¬ ì‚¬ìš© UI ê°œì„  â­â­
- **MCP ì„œë²„ ì´ë¦„ í‘œì‹œ** (mcp_123... â†’ "í„°ë¯¸ë„")
  - ì„œë²„ ID â†’ DBì—ì„œ ì´ë¦„ ë§¤í•‘
  - `í„°ë¯¸ë„ > execute` í˜•ì‹
- **ì‹¤í–‰ ì¤‘ ì‹¤ì‹œê°„ í‘œì‹œ**
  - "ğŸ”§ í„°ë¯¸ë„ ì‹¤í–‰ ì¤‘..." + ìŠ¤í”¼ë„ˆ
  - ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸
- **ì™„ë£Œ í›„ ì ‘íŒ ìƒíƒœ**
  - "ğŸ”§ ë„êµ¬ ì‚¬ìš© (2ê°œ) â–¶" í´ë¦­í•˜ë©´ í¼ì¹¨
  - í¼ì¹˜ë©´ ê° ë„êµ¬ + ê²°ê³¼ í‘œì‹œ
- **ëª¨ë“  MCP ë„êµ¬ì— ì ìš©**
  - í„°ë¯¸ë„, ìŠ¤ë§ˆíŠ¸í™ˆ, Todo, ë°”ë¨í« ë“±

### âœ… ì˜¤ëŠ˜ ì™„ë£Œ (ìƒˆë²½) - MCP ì„œë²„ í¸ì§‘ + ë… ì—°ë™ â­
- **MCP ì„œë²„ í¸ì§‘ ëª¨ë‹¬ í™•ì¥**
  - ì•„ì´ì½˜ ì„ íƒ ê¸°ëŠ¥ (9ì¢… ì•„ì´ì½˜)
  - UI URL ì„¤ì • (ë… í´ë¦­ ì‹œ ì—´ë¦¬ëŠ” í˜ì´ì§€)
  - "ë…ì— í‘œì‹œ" ì²´í¬ë°•ìŠ¤
  - ì €ì¥ ì‹œ ìë™ìœ¼ë¡œ ë… ì—…ë°ì´íŠ¸
- **ë… ì„¤ì • DB ì—°ë™**
  - GET/PUT /api/config/dock API
  - showInDock ì²´í¬ëœ MCP ì„œë²„ ìë™ ì¶”ê°€
  - ê³ ì • ì•„ì´í…œ: í„°ë¯¸ë„, ë§ˆì´í¬, ì„¤ì •
- **Hub Server ë„êµ¬ ê°œìˆ˜ ìˆ˜ì •**
  - context-tool.js ì‹¤ì œ ë„êµ¬ 4ê°œ íŒŒì‹±

### ğŸ”² ë‹¤ìŒ í•  ê²ƒ - ë…(Dock) í¸ì§‘ ëª¨ë“œ
- **ê¸°ë³¸ ë… ì•„ì´í…œ** â†’ ì„¤ì •ë§Œ
- **ë¡±í”„ë ˆìŠ¤ í¸ì§‘ ëª¨ë“œ**
  - ì„¤ì • ì•„ì´ì½˜ ì œì™¸í•˜ê³  ìˆœì„œ ë³€ê²½ ê°€ëŠ¥
  - ì•„ì´ì½˜ í”ë“¤ë¦¼ + Xë²„íŠ¼
  - ë“œë˜ê·¸ì•¤ë“œë¡­ ìˆœì„œ ë³€ê²½
- **ì•„ì´ì½˜ ì‹œìŠ¤í…œ í™•ì¥**
  - ì‚¬ìš©ì ì´ë¯¸ì§€ ì—…ë¡œë“œ ë˜ëŠ”
  - ë‹¤ì–‘í•œ í”„ë¦¬ì…‹ ì•„ì´ì½˜ ì¶”ê°€

### âœ… ì–´ì œ ì™„ë£Œ (1/26 ë°¤ 23ì‹œ) - ìº”ë²„ìŠ¤ íƒ­ ì‹œìŠ¤í…œ â­
- **ìº”ë²„ìŠ¤ íŒ¨ë„ íƒ­ ì‹œìŠ¤í…œ êµ¬í˜„**
  - í¬ë¡¬ íƒ­ì²˜ëŸ¼ ì—¬ëŸ¬ MCP UI ë™ì‹œ ì—´ê¸°
  - íƒ­ ì „í™˜, ë‹«ê¸° ê¸°ëŠ¥
  - ë… í´ë¦­ â†’ ìº”ë²„ìŠ¤ íƒ­ìœ¼ë¡œ ì—´ë¦¼
- **Todo UI ìŠ¤íƒ€ì¼ ì •ë¦¬**
  - ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€, ì—¬ë°± ìµœì í™”
  - Memo íƒ­: í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìˆ¨ê¹€, textarea 100%

### ğŸ”² ë‹¤ìŒ í•  ê²ƒ - ë…(Dock) í¸ì§‘ ëª¨ë“œ
- **ê¸°ë³¸ ë… ì•„ì´í…œ** â†’ ì„¤ì •ë§Œ (MCP showInDock ì²´í¬ëœ ê²ƒ + ì„¤ì •)
- **ë¡±í”„ë ˆìŠ¤ í¸ì§‘ ëª¨ë“œ**
  - ì„¤ì • ì•„ì´ì½˜ ì œì™¸í•˜ê³  ìˆœì„œ ë³€ê²½ ê°€ëŠ¥
  - ì•„ì´ì½˜ í”ë“¤ë¦¼ + Xë²„íŠ¼
  - ë“œë˜ê·¸ì•¤ë“œë¡­ ìˆœì„œ ë³€ê²½
- **ì•„ì´ì½˜ ì‹œìŠ¤í…œ í™•ì¥**
  - ì‚¬ìš©ì ì´ë¯¸ì§€ ì—…ë¡œë“œ ë˜ëŠ”
  - ë‹¤ì–‘í•œ í”„ë¦¬ì…‹ ì•„ì´ì½˜ ì¶”ê°€

### âœ… ì–´ì œ ì™„ë£Œ (1/26 ë°¤ 23ì‹œ) - ìº”ë²„ìŠ¤ íƒ­ ì‹œìŠ¤í…œ â­
- **ìº”ë²„ìŠ¤ íŒ¨ë„ íƒ­ ì‹œìŠ¤í…œ êµ¬í˜„**
  - í¬ë¡¬ íƒ­ì²˜ëŸ¼ ì—¬ëŸ¬ MCP UI ë™ì‹œ ì—´ê¸°
  - íƒ­ ì „í™˜, ë‹«ê¸° ê¸°ëŠ¥
  - ë… í´ë¦­ â†’ ìº”ë²„ìŠ¤ íƒ­ìœ¼ë¡œ ì—´ë¦¼
- **Todo UI ìŠ¤íƒ€ì¼ ì •ë¦¬**
  - ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€, ì—¬ë°± ìµœì í™”
  - Memo íƒ­: í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìˆ¨ê¹€, textarea 100%
  - ì„¹ì…˜ ì œëª© ì¸ë¼ì¸ ìˆ˜ì • ê°€ëŠ¥
  - ì„¹ì…˜ ì ‘ê¸°/í¼ì¹˜ê¸°
  - ì„¹ì…˜ ì¶”ê°€/ì‚­ì œ (ì»¤ìŠ¤í…€ ëª¨ë‹¬)
- **UI ê°œì„ **
  - ë±ƒì§€ ì˜¤ë¥¸ìª½ ë ì •ë ¬ (flex spacer)
  - textarea ì„¸ë¡œë§Œ resize ê°€ëŠ¥
  - ì»¤ìŠ¤í…€ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ (ë¸Œë¼ìš°ì € confirm ëŒ€ì²´)
- **MCP ë„êµ¬ description ìƒì„¸í™”**
  - í¬ë§· ì˜ˆì‹œ í¬í•¨ (AIê°€ ì˜¬ë°”ë¥¸ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ë„ë¡)
  - read_todo/write_todo/read_memo/write_memo 6ê°œ ë„êµ¬

### âœ… ì˜¤ëŠ˜ ì™„ë£Œ (ë°¤) - MCP ì„œë²„ ë“±ë¡ ì‹œìŠ¤í…œ â­
- **Soul ì•±ì—ì„œ ì™¸ë¶€ MCP ì„œë²„ ê´€ë¦¬**
  - URL ê¸°ë°˜ ë“±ë¡ (SSE ì—”ë“œí¬ì¸íŠ¸)
  - ì„œë²„ ON/OFF, ìˆ˜ì •, ì‚­ì œ
  - ë„êµ¬ ëª©ë¡ ì‹¤ì‹œê°„ ì¡°íšŒ
- **ë“±ë¡ëœ MCP ì„œë²„ë“¤**
  - ìŠ¤ë§ˆíŠ¸í™ˆ: `https://mcp.sowon.mooo.com/smarthome/sse` (4ê°œ ë„êµ¬)
  - Todo: `https://mcp.sowon.mooo.com/todo/sse` (4ê°œ ë„êµ¬)
  - SSH: `https://mcp.sowon.mooo.com/ssh/sse` (5ê°œ ë„êµ¬)
  - ë°”ë¨í«: `https://mcp.sowon.mooo.com/pet/sse` (8ê°œ ë„êµ¬)
- **AI ë„êµ¬ ì—°ë™ êµ¬í˜„**
  - `mcp-tools.js` ì „ë©´ ê°œí¸
  - ë‚´ì¥ ë„êµ¬ + ë¡œì»¬ ë„êµ¬ + ì™¸ë¶€ MCP ì„œë²„ ë„êµ¬ í†µí•©
  - enabledëœ ì„œë²„ë§Œ ë„êµ¬ ë¡œë“œ
  - 5ë¶„ ìºì‹œë¡œ ì„±ëŠ¥ ìµœì í™”
- **ìŠ¤ë§ˆíŠ¸í™ˆ `/api/tool-call` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€**
  - AIê°€ ì‹¤ì œë¡œ ê¸°ê¸° ì œì–´ ê°€ëŠ¥
- **UI ê°œì„ **
  - ì„œë²„ ì¶”ê°€ ì‹œ ë°”ë¡œ ë„êµ¬ ê°œìˆ˜ í‘œì‹œ
  - ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ìœ¼ë¡œ ë‹«ê¸° (ë“œë˜ê·¸ëŠ” ë¬´ì‹œ)
  - ë””ë ‰í† ë¦¬ ìŠ¤ìº” ë°©ì‹ â†’ config ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½

### ğŸ“Œ MCP ì—°ë™ ë‚¨ì€ ì‘ì—…
- [x] Todo, SSH, ë°”ë¨í« ì„œë²„ì—ë„ `/api/tool-call` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ âœ… (ì´ë¯¸ êµ¬í˜„ë¨ í™•ì¸ 01-26)
- [ ] ì‹¤ì œ ì±„íŒ…ì—ì„œ AI ë„êµ¬ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- [ ] ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ â†’ AI ì‘ë‹µì— ë°˜ì˜

### âœ… ì˜¤ëŠ˜ ì™„ë£Œ (ì €ë…) - ìŠ¤ë§ˆíŠ¸í™ˆ ì›¹ UI
- **ìŠ¤ë§ˆíŠ¸í™ˆ ì»¨íŠ¸ë¡¤ í˜ì´ì§€ ì™„ì„±** â­
  - URL: https://mcp.sowon.mooo.com/smarthome/public/
  - ê¸°ê¸°ë³„ ì„¸ë°€ ì œì–´ (ì˜¨ë„, ë°ê¸°, íŒ¬ì†ë„, ë³¼ë¥¨)
  - ê¸°ê¸° í¸ì§‘ (ì´ë¦„, êµ¬ì¡°, ë°©, íƒ€ì…, ìˆ¨ê¸°ê¸°)
  - êµ¬ì¡°/ë°© ì´ë¦„ ì¼ê´„ ë³€ê²½ ê¸°ëŠ¥
  - ì¹´ë©”ë¼ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ + PIP (ìº£íœ , ìš•ì‹¤)
- **íƒ€ì…ë³„ ì „ìš© ì»¨íŠ¸ë¡¤ ì¶”ê°€**
  - ğŸ§¹ ë¡œë´‡ì²­ì†Œê¸°: ì²­ì†Œ/ì¼ì‹œì •ì§€/ë„í‚¹ ë²„íŠ¼ + ìƒíƒœí‘œì‹œ
  - ğŸ“¶ ê³µìœ ê¸°: ë¦¬ë¶€íŒ…/ì •ë³´ ë²„íŠ¼
  - ğŸ”Š ìŠ¤í”¼ì»¤: ë³¼ë¥¨ ìŠ¬ë¼ì´ë” + ìŒì†Œê±°
  - ğŸ§º ì„¸íƒê¸°: ì‹œì‘/ì •ì§€
  - ğŸ”¥ ë³´ì¼ëŸ¬: ì‹¤ë‚´/ì™¸ì¶œ ëª¨ë“œ + ì˜¨ë„ ì„¤ì •
  - ğŸ’¨ ê³µê¸°ì²­ì •ê¸°: íŒ¬ì†ë„ 4ë‹¨ê³„
- **server.js í™•ì¥** - volume, mute, vacuum, washer, reboot, mode ì•¡ì…˜ ì¶”ê°€

### ğŸ“Œ ë³´ë¥˜ (ë‚˜ì¤‘ì—)
- [ ] ìƒ¤ì˜¤ë¯¸ ë¡œì»¬ ì—°ë™ (python-miio) - ê°€ìŠµê¸°, ê³µê¸°ì²­ì •ê¸° ì„¸ë¶€ ì œì–´
- [ ] íˆ¬ì•¼ ë¦¬ëª¨ì»¨ ë¡œì»¬ ì—°ë™ (tinytuya) - í”„ë¡œì í„° IR ì œì–´
- [ ] ì¹¨ëŒ€ ì˜† ì¡°ëª… - ì˜¤í”„ë¼ì¸ ìƒíƒœ (ê¸°ê¸° í™•ì¸ í•„ìš”)

### âœ… ì˜¤ëŠ˜ ì™„ë£Œ (ìƒˆë²½)
- **Docker â†’ ë„¤ì´í‹°ë¸Œ ì‹¤í–‰ ì „í™˜**
  - MongoDB 7.0 ë¡œì»¬ ì„¤ì¹˜ (brew)
  - ê¸°ì¡´ Docker ë°ì´í„° ê·¸ëŒ€ë¡œ ë³´ì¡´
  - ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸: `mongod --dbpath /Volumes/soul/app/data/mongodb`
- **WebSocket í”„ë¡ì‹œ ì„¤ì •** - Vite configì— ws í”„ë¡ì‹œ ì¶”ê°€
- **í´ë” íƒìƒ‰ê¸° UI ê°œì„ **
  - z-index ìˆ˜ì • (ëª¨ë‹¬ ìµœìƒìœ„)
  - ìƒ‰ìƒ ê°€ë…ì„± ê°œì„  (í° ë°°ê²½ + ê²€ì • ê¸€ì”¨)
  - ë°€ëŸ¬ ì»¬ëŸ¼ ìŠ¤íƒ€ì¼ (macOS Finderì²˜ëŸ¼ ì¢Œâ†’ìš° ê³„ì¸µ)
- **í†µí•© ê²€ìƒ‰ êµ¬í˜„**
  - MongoDB ë©”ì‹œì§€/ë©”ëª¨ë¦¬ + íŒŒì¼ ê¸°ë°˜ ìš”ì•½/ì•„ì¹´ì´ë¸Œ/ë¬¸ì„œ ì „ì²´ ê²€ìƒ‰
  - search.jsì˜ smartSearchë¥¼ í†µí•© ê²€ìƒ‰ìœ¼ë¡œ êµì²´
- **í•˜ë“œì½”ë”© ì˜ˆì œ ë©”ì‹œì§€ ì‚­ì œ** - index.htmlì—ì„œ React ì˜ˆì œ ì œê±°
- **MongoDB â†’ JSONL ì „í™˜** â­
  - ëŒ€í™” ì €ì¥: `/Volumes/soul/app/memory/conversations.jsonl`
  - ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ (108ê°œ ë©”ì‹œì§€)
  - MongoDB ì—†ì´ íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘
  - ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°°í¬ ì‹œ MongoDB ë¶ˆí•„ìš”
- **ë¬´í•œ ìŠ¤í¬ë¡¤ ìˆ˜ì •**
  - scrollContainerë¥¼ chatContainerë¡œ ë³€ê²½
  - before íŒŒë¼ë¯¸í„°ë¡œ ê³¼ê±° ë©”ì‹œì§€ í˜ì´ì§€ë„¤ì´ì…˜
- **ê²€ìƒ‰ ê²°ê³¼ í´ë¦­ â†’ í•´ë‹¹ ëŒ€í™”ë¡œ ì´ë™** â­
  - around íŒŒë¼ë¯¸í„°ë¡œ í•´ë‹¹ ë©”ì‹œì§€ ì£¼ë³€ ë¡œë“œ
  - ìŠ¤í¬ë¡¤ ì´ë™ + íŒŒë€ìƒ‰ í•˜ì´ë¼ì´íŠ¸ ì• ë‹ˆë©”ì´ì…˜ (2ì´ˆ)
  - chat.css import ì¶”ê°€

### ğŸ”œ ë‹¤ìŒ ì‘ì—… (ëŒ€ê¸°)

- [ ] **ì €ì¥ì†Œ íƒ€ì… ë¶„ë¦¬** - ë©”ëª¨ë¦¬/íŒŒì¼ ê°ê° ë‹¤ë¥¸ ì €ì¥ì†Œ ì„ íƒ ê°€ëŠ¥
  ```js
  // í˜„ì¬: ì „ì—­ íƒ€ì… + ê²½ë¡œë§Œ
  storageConfig = { memoryPath, filesPath }
  
  // ëª©í‘œ: í•­ëª©ë³„ íƒ€ì…+ê²½ë¡œ
  storageConfig = {
    memory: { type: 'local', path: './memory' },
    files: { type: 'googledrive', id: 'xxx' }
  }
  ```
  - í”„ë¡ íŠ¸: ë“œë¡­ë‹¤ìš´ UI ì¶”ê°€
  - ë°±ì—”ë“œ: ìŠ¤í‚¤ë§ˆ ìˆ˜ì •
  - ì–´ëŒ‘í„°: Google Drive, Notion, NAS êµ¬í˜„

- [ ] ìŠ¤íŠ¸ë¦¬ë° ì¤‘ thinking ìë™ í¼ì¹¨/ì™„ë£Œ ì‹œ ì ‘ê¸°
- [ ] recall_memory ì‹¤ì œ í…ŒìŠ¤íŠ¸ ë° íŠœë‹
- [ ] ë¬¸ì„œ OCR ì—°ë™ (ë¬¸ì„œ ì—…ë¡œë“œ â†’ AI íƒœê¹… â†’ ê²€ìƒ‰)
- [ ] ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°°í¬ ì¤€ë¹„

### ğŸ–¥ï¸ í˜„ì¬ ì‹¤í–‰ í™˜ê²½ (ë„¤ì´í‹°ë¸Œ)
```bash
# MongoDB
mongod --dbpath /Volumes/soul/app/data/mongodb

# ë°±ì—”ë“œ
cd /Volumes/soul/app/soul && node server/index.js

# í”„ë¡ íŠ¸ì—”ë“œ
cd /Volumes/soul/app/client && npx vite --host 0.0.0.0
```

## ğŸ“‹ ì´ì „ ì‘ì—… ì´ë ¥

# Soul AI - TODO & ì‘ì—… ì´ë ¥

## ğŸ“‹ í˜„ì¬ ì§„í–‰ ìƒí™©

### âœ… ì™„ë£Œëœ ì‘ì—…ë“¤ (2026-01-25)

#### 4. ë©”ëª¨ë¦¬ ì„¤ì • DB ì—°ë™ ì™„ë£Œ (15:55~16:00)
**ë¬¸ì œ**: ë©”ëª¨ë¦¬ ì„¤ì •ì´ localStorageì—ë§Œ ì €ì¥ë˜ì–´ ë°±ì—”ë“œê°€ ì¸ì‹ ëª»í•¨
```
í”„ë¡ íŠ¸: localStorage.setItem('memoryConfig') â†’ ë¸Œë¼ìš°ì €ë§Œ ì €ì¥
ë°±ì—”ë“œ: í•˜ë“œì½”ë”© (shortTermSize: 50, archiveThreshold: 100)
```

**í•´ê²°**: 
- âœ… í”„ë¡ íŠ¸ì—”ë“œ: API í˜¸ì¶œë¡œ ë³€ê²½ (`PUT /api/config/memory`)
- âœ… ë°±ì—”ë“œ: DB ì„¤ì • ì½ì–´ì˜¤ë„ë¡ ìˆ˜ì •
  - memory-layers.js - DB ê°’ ì‚¬ìš©
  - getMemoryManager - archiveThreshold, sessionSummaryInterval DB ë¡œë“œ
- âœ… DB ê¸°ë³¸ê°’ ì„¤ì •
  ```javascript
  {
    autoSave: true,
    autoInject: true,
    shortTermSize: 50,
    compressionThreshold: 80,
    archiveThreshold: 100,
    sessionSummaryInterval: 50
  }
  ```

**íŒŒì¼ ë³€ê²½**:
```
/client/src/settings/components/ai-settings.js  (ì´ë¯¸ ìˆ˜ì •ë¨)
/soul/utils/memory-layers.js                    (DB ì„¤ì • ì‚¬ìš©)
```

**ê²°ê³¼**:
- âœ… ì„¤ì • í˜ì´ì§€ì—ì„œ ë³€ê²½ â†’ MongoDB ì €ì¥ â†’ ë°±ì—”ë“œ ì ìš©
- âœ… ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ í›„ì—ë„ ì„¤ì • ìœ ì§€
- âœ… Git: (ì»¤ë°‹ ì˜ˆì •)

---

#### 3. ì»¤ìŠ¤í…€ í•„ë“œ textarea íƒ€ì… ì¶”ê°€
**ë¬¸ì œ**: Docker ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œ ì‹œ settings.json ì´ˆê¸°í™”
**í•´ê²°**: MongoDB ê¸°ë°˜ ì„¤ì • ì €ì¥ ì‹œìŠ¤í…œ êµ¬ì¶•

**êµ¬í˜„ ë‚´ìš©**:
- SystemConfig ëª¨ë¸ ìƒì„± (key-value ì €ì¥)
- ConfigManager ì „ë©´ ìˆ˜ì • (íŒŒì¼ â†’ DB)
- ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë° ì‹¤í–‰
- 'auto' ë¼ìš°íŒ… ëª¨ë“œ ì¶”ê°€ (API í‚¤ ì—†ì„ ë•Œ ì•ˆë‚´)

**íŒŒì¼ ë³€ê²½**:
```
/soul/models/SystemConfig.js          (ì‹ ê·œ)
/soul/utils/config.js                 (DB ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì •)
/soul/migrate-settings.js             (ì‹ ê·œ)
/soul/utils/smart-router.js           ('auto' ì²˜ë¦¬)
/client/src/settings/components/ai-settings.js  (ì•ˆë‚´ ë©”ì‹œì§€)
/client/src/settings/styles/settings.css        (ìŠ¤íƒ€ì¼)
```

**ê²°ê³¼**: 
- âœ… ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œí•´ë„ ì„¤ì • ìœ ì§€
- âœ… API í‚¤ ì—†ì–´ë„ ì¹œí™”ì  ì•ˆë‚´
- âœ… Git: f27fd71

---

#### 2. í”„ë¡ íŠ¸ì—”ë“œ ë²„ê·¸ ìˆ˜ì • (15:22~15:29)

**ë¬¸ì œ 1**: í”„ë¡œí•„ ë‚ ì§œ í•„ë“œ ì—ëŸ¬
```
RangeError: Invalid time value at Date.toISOString()
```
**ì›ì¸**: ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œê°’ ("ã„±ã„´ã„·ã„¹" ë“±)
**í•´ê²°**: ë‚ ì§œ ìœ íš¨ì„± ì²´í¬ ì¶”ê°€
```javascript
const date = value ? new Date(value) : null;
const dateValue = (date && !isNaN(date.getTime())) 
  ? date.toISOString().split('T')[0] 
  : '';
```

**ë¬¸ì œ 2**: MCP API 500 ì—ëŸ¬
```
ENOENT: no such file or directory, scandir '/mcp/tools'
```
**í•´ê²°**: 
- `./data/mcp/tools` ë””ë ‰í† ë¦¬ ìƒì„±
- docker-compose.yml ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì¶”ê°€
- ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

**íŒŒì¼ ë³€ê²½**:
```
/client/src/settings/components/profile-settings.js  (ë‚ ì§œ ì²´í¬)
/docker-compose.yml                                   (MCP ë³¼ë¥¨)
/data/mcp/tools/                                      (ë””ë ‰í† ë¦¬ ìƒì„±)
```

**ê²°ê³¼**:
- âœ… í”„ë¡œí•„ ì„¤ì • ì •ìƒ ì‘ë™
- âœ… MCP ì„œë²„ API ì •ìƒ
- âœ… Git: 39fc49b

---

### ğŸ”„ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë³€ê²½ì‚¬í•­

**ì„¤ì • ì €ì¥ ë°©ì‹**:
```
Before: settings.json (ì»¨í…Œì´ë„ˆ ë‚´ë¶€) â†’ ì¬ë¹Œë“œ ì‹œ ì´ˆê¸°í™”
After:  MongoDB (ì˜êµ¬ ì €ì¥) â†’ ì¬ë¹Œë“œ í›„ì—ë„ ìœ ì§€
```

**ë¼ìš°íŒ… ê¸°ë³¸ê°’**:
```
Before: Claude ëª¨ë¸ í•˜ë“œì½”ë”© â†’ API í‚¤ í•„ìˆ˜
After:  'auto' ëª¨ë“œ â†’ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ ìë™ ì„ íƒ
```

**ë°ì´í„° ì˜êµ¬ì„±**:
```
âœ… MongoDB ë°ì´í„°: /Volumes/soul/app/data/mongodb (í˜¸ìŠ¤íŠ¸)
âœ… MCP ì„œë²„: /Volumes/soul/app/data/mcp (í˜¸ìŠ¤íŠ¸)
âœ… íŒŒì¼ ì €ì¥ì†Œ: /Volumes/soul/app/data/files (í˜¸ìŠ¤íŠ¸)
âœ… ë©”ëª¨ë¦¬: /Volumes/soul/app/memory (í˜¸ìŠ¤íŠ¸)
```

---

## ğŸ“ ë‹¤ìŒ ì‘ì—…ìë¥¼ ìœ„í•œ ê°€ì´ë“œ

### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ìˆ˜ì • ì‹œ ì£¼ì˜ì‚¬í•­

**ì¤‘ìš”**: í”„ë¡ íŠ¸ì—”ë“œëŠ” **í”„ë¡œë•ì…˜ ë¹Œë“œ** ëª¨ë“œ!

ì½”ë“œ ìˆ˜ì • í›„ ë°˜ë“œì‹œ ì¬ë¹Œë“œ:
```bash
cd /Volumes/soul/app
docker-compose build --no-cache soul-frontend
docker-compose up -d soul-frontend
```

ë¸Œë¼ìš°ì € ê°•ë ¥ ìƒˆë¡œê³ ì¹¨:
- Mac: `Cmd + Shift + R`
- Windows: `Ctrl + Shift + R`

### ì„¤ì • ê´€ë ¨ ì‘ì—…

**ì„¤ì • í™•ì¸**:
```bash
# MongoDB ì„¤ì • ì¡°íšŒ
curl http://localhost:3001/api/config/routing

# ë¼ìš°íŒ… ì„¤ì • ìˆ˜ì •
curl -X PUT http://localhost:3001/api/config/routing \
  -H "Content-Type: application/json" \
  -d '{"enabled": true, "light": "auto", "medium": "auto", "heavy": "auto"}'
```

**ì„¤ì • ì €ì¥ ìœ„ì¹˜**:
- MongoDB: `systemconfigs` ì»¬ë ‰ì…˜
- Key: "ai", "routing", "memory", "files"

### Git ì»¤ë°‹ ì´ë ¥

```
39fc49b - ğŸ› ë‚ ì§œ í•„ë“œ ìœ íš¨ì„± ì²´í¬ + MCP ë””ë ‰í† ë¦¬ ë§ˆìš´íŠ¸ ì¶”ê°€
f27fd71 - âœ… Auto ë¼ìš°íŒ… + ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€  
266895e - âœ… ì„¤ì • DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
```

---

## ğŸ—‘ï¸ ì •ë¦¬ ê°€ëŠ¥í•œ íŒŒì¼

### soul-backup/ (64KB)
- MongoDB ë°±ì—… (2026-01-25 13:46)
- ì„¤ì • ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ ë°±ì—…
- í˜„ì¬ DB ì •ìƒ ì‘ë™ ì¤‘

**ì‚­ì œ ê°€ëŠ¥**:
```bash
cd /Volumes/soul/app
rm -rf soul-backup/
```

ë˜ëŠ” **ì••ì¶• ë³´ê´€**:
```bash
tar -czf soul-backup-20260125.tar.gz soul-backup/
rm -rf soul-backup/
```

---

### âœ… ì»¤ìŠ¤í…€ í•„ë“œ textarea íƒ€ì… ì¶”ê°€
**ë‚ ì§œ**: 2026-01-25 15:33

**ë¬¸ì œ**: í”„ë¡œí•„ ì»¤ìŠ¤í…€ í•„ë“œì—ì„œ textarea íƒ€ì… ì„ íƒ ì‹œ 500 ì—ëŸ¬
```
Profile validation failed: customFields.1.type: 
`textarea` is not a valid enum value for path `type`.
```

**í•´ê²°**: Profile.js ìŠ¤í‚¤ë§ˆ enumì— 'textarea' ì¶”ê°€
```javascript
// Before
enum: ['text', 'number', 'date', 'tag', 'list', 'url', 'select']

// After  
enum: ['text', 'number', 'date', 'tag', 'list', 'url', 'select', 'textarea']
```

**Git**: 1bb4347

---

### âœ… ë‚ ì§œ í•„ë“œ ìœ íš¨ì„± ì²´í¬ + MCP ë””ë ‰í† ë¦¬ ìˆ˜ì •
**ë‚ ì§œ**: 2026-01-25 15:22~15:27

**ë¬¸ì œ 1**: í”„ë¡œí•„ ì„¤ì • ë‚ ì§œ í•„ë“œì—ì„œ Invalid time value ì—ëŸ¬
**ì›ì¸**: ì‚¬ìš©ìê°€ ë‚ ì§œ í•„ë“œì— "ã„±ã„´ã„·ã„¹" ê°™ì€ ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ ì…ë ¥
**í•´ê²°**: `new Date(value)` ìœ íš¨ì„± ì²´í¬ ì¶”ê°€
```javascript
const date = value ? new Date(value) : null;
const dateValue = (date && !isNaN(date.getTime())) ? date.toISOString().split('T')[0] : '';
```

**ë¬¸ì œ 2**: MCP ë²„íŠ¼ í´ë¦­ ì‹œ 500 ì—ëŸ¬ (ENOENT: /mcp/tools)
**ì›ì¸**: `/mcp/tools` ë””ë ‰í† ë¦¬ ì—†ìŒ
**í•´ê²°**: 
- `./data/mcp/tools` ë””ë ‰í† ë¦¬ ìƒì„±
- docker-compose.ymlì— `./data/mcp:/mcp` ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì¶”ê°€
- ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ (down â†’ up)

**ì™„ë£Œ**:
- [x] ë‚ ì§œ ìœ íš¨ì„± ì²´í¬ (ê¸°ë³¸ í•„ë“œ + ì»¤ìŠ¤í…€ í•„ë“œ)
- [x] MCP ë””ë ‰í† ë¦¬ ìƒì„± ë° ë§ˆìš´íŠ¸
- [x] ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
- [x] API ì •ìƒ ì‘ë™ í™•ì¸

**Git**: 39fc49b

---

### âœ… ì„¤ì • DB ë§ˆì´ê·¸ë ˆì´ì…˜ + Auto ë¼ìš°íŒ… ì™„ë£Œ
**ë‚ ì§œ**: 2026-01-25 14:10~15:10

**ë¬¸ì œ 1**: settings.jsonì´ Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ìˆì–´ ì¬ë¹Œë“œ ì‹œ ì´ˆê¸°í™”ë¨
**í•´ê²°**: ëª¨ë“  ì„¤ì •ì„ MongoDBë¡œ ì´ì „í•˜ì—¬ ì˜êµ¬ ë³´ì¡´

**ë¬¸ì œ 2**: ë¼ìš°íŒ… ì„¤ì •ì´ Claude ëª¨ë¸ë¡œ í•˜ë“œì½”ë”©ë˜ì–´ API í‚¤ ì—†ìœ¼ë©´ ì‚¬ìš© ë¶ˆê°€
**í•´ê²°**: 'auto' ëª¨ë“œ ì¶”ê°€ + í”„ë¡ íŠ¸ì—”ë“œ ì•ˆë‚´ ë©”ì‹œì§€

**ì™„ë£Œ ì‘ì—…**:
- [x] SystemConfig ëª¨ë¸ ìƒì„± (`/soul/models/SystemConfig.js`)
- [x] ConfigManager DB ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì • (`/soul/utils/config.js`)
  - [x] readConfig() â†’ MongoDB ì¡°íšŒ
  - [x] writeConfig() â†’ MongoDB ì €ì¥
  - [x] ê¸°ë³¸ê°’ì„ 'auto'ë¡œ ë³€ê²½
- [x] ì´ˆê¸° ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
  - [x] migrate-settings.js ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [x] ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì„±ê³µ
- [x] Auto ë¼ìš°íŒ… êµ¬í˜„
  - [x] updateModelsFromConfigì—ì„œ 'auto' ì²˜ë¦¬ (ê¸°ë³¸ ëª¨ë¸ ì‚¬ìš©)
  - [x] DB ì„¤ì •ì„ 'auto'ë¡œ ì—…ë°ì´íŠ¸
- [x] í”„ë¡ íŠ¸ì—”ë“œ ì•ˆë‚´ ë©”ì‹œì§€
  - [x] API í‚¤ ì—†ì„ ë•Œ ë“œë¡­ë‹¤ìš´ ë¹„í™œì„±í™”
  - [x] "API í‚¤ë¥¼ ë¨¼ì € ì„¤ì •í•´ì£¼ì„¸ìš”" ì•ˆë‚´ ë°•ìŠ¤
  - [x] CSS ìŠ¤íƒ€ì¼ ì¶”ê°€
- [x] í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
  - [x] ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ í›„ DBì—ì„œ ì •ìƒ ë¡œë“œ í™•ì¸

**ê²°ê³¼**: 
- ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œí•´ë„ ì„¤ì • ìœ ì§€ë¨! ğŸ‰
- API í‚¤ ì—†ì–´ë„ 'auto' ëª¨ë“œë¡œ ê¸°ë³¸ ëª¨ë¸ ì‚¬ìš© ê°€ëŠ¥
- ì‚¬ìš©ì ì¹œí™”ì ì¸ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€

---

### âœ… ì™„ì „ í¬í„°ë¸” ë§¥ í™˜ê²½ êµ¬ì¶• ì™„ë£Œ ğŸ‰
**ë‚ ì§œ**: 2026-01-25 13:55

**ì™„ë£Œ ë‚´ìš©**:
- [x] APFS ë³¼ë¥¨ ìƒì„± (`/Volumes/soul/app`, 30GB)
- [x] Docker Compose ì™„ì „ í¬í„°ë¸” êµ¬ì¡° êµ¬ì¶•
- [x] MongoDB ë°±ì—… (ì½”ë“œìŠ¤í˜ì´ìŠ¤ â†’ ë§¥) ë° ë³µì› ì™„ë£Œ
- [x] Frontend/Backend ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì„±ê³µ
- [x] ì „ì²´ ì‹œìŠ¤í…œ ê°€ë™ í™•ì¸ (http://localhost:3080)

**ì‹œìŠ¤í…œ ìƒíƒœ**:
```
âœ… MongoDB: 14ê°œ ë¬¸ì„œ ë³µì› ì™„ë£Œ
âœ… Backend: http://localhost:3001 - AI ì„œë¹„ìŠ¤, í”„ë¡œí•„, Role ì´ˆê¸°í™” ì™„ë£Œ
âœ… Frontend: http://localhost:3080 - Vite ë¹Œë“œ ì™„ë£Œ, Nginx ì„œë¹™
âœ… í¬í„°ë¸”: ./start.sh í•œ ë²ˆìœ¼ë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰
```

**ì•„í‚¤í…ì²˜**:
```
/Volumes/soul/app/
â”œâ”€â”€ docker-compose.yml (ìƒëŒ€ ê²½ë¡œë§Œ)
â”œâ”€â”€ start.sh (ìë™ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸)
â”œâ”€â”€ soul/ (ë°±ì—”ë“œ)
â”œâ”€â”€ client/ (í”„ë¡ íŠ¸ì—”ë“œ)
â”œâ”€â”€ data/ (ìë™ ìƒì„± - MongoDB ë°ì´í„°)
â””â”€â”€ memory/ (ë©”ëª¨ë¦¬ ì €ì¥ì†Œ)
```

**íŠ¹ì§•**:
- í™˜ê²½ë³„ ê²½ë¡œ í•˜ë“œì½”ë”© ì™„ì „ ì œê±°
- í´ë” ë³µì‚¬ë§Œìœ¼ë¡œ ì–´ë””ì„œë“  ì‹¤í–‰ ê°€ëŠ¥
- ë§¥ë¯¸ë‹ˆ ì´ì „: `rsync -av /Volumes/soul/app/ ë§¥ë¯¸ë‹ˆ:/path/`
- Dockerë§Œ ìˆìœ¼ë©´ ì‹¤í–‰ (~5GB ì„¤ì¹˜)

**ë‹¤ìŒ ë‹¨ê³„**:
- [ ] ì™¸ì¥í•˜ë“œ ì—°ê²° ì‹œ ë°ì´í„° ì´ì „ (1TB)
- [ ] ë§¥ë¯¸ë‹ˆ êµ¬ë§¤ í›„ rsyncë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ì½”ë“œìŠ¤í˜ì´ìŠ¤ ì™„ì „ ì‚­ì œ (ë¹„ìš© ì ˆê°)

---

## ğŸ”¥ ì´ì „ ì‘ì—… í˜„í™© (2026-01-24)

### âœ… ë©”ëª¨ë¦¬ ê²€ìƒ‰ UI êµ¬í˜„ ì™„ë£Œ
**ìœ„ì¹˜**: `/client/src/utils/search-manager.js`

**êµ¬í˜„ ë‚´ìš©**:
- SearchManager í´ë˜ìŠ¤ - ê²€ìƒ‰ ì´ë²¤íŠ¸, API í˜¸ì¶œ, ê²°ê³¼ ë Œë”ë§
- ë””ë°”ìš´ìŠ¤ ê²€ìƒ‰ (300ms) + Enter í‚¤ ì¦‰ì‹œ ê²€ìƒ‰
- Smart Search API ì—°ë™ (`/api/search/smart`)
- ê²€ìƒ‰ ê²°ê³¼ ë“œë¡­ë‹¤ìš´ UI (glassmorphism ìŠ¤íƒ€ì¼)
- ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŠ¸, ë‚ ì§œ í¬ë§·íŒ…
- ê²€ìƒ‰ ê²°ê³¼ í´ë¦­ ì‹œ Canvas íŒ¨ë„ì— ë©”ëª¨ë¦¬ ìƒì„¸ í‘œì‹œ

**ë³€ê²½ íŒŒì¼**:
- `/client/src/utils/search-manager.js` - ì‹ ê·œ ìƒì„±
- `/client/src/styles/main.css` - ê²€ìƒ‰ ë“œë¡­ë‹¤ìš´ CSS ì¶”ê°€
- `/client/src/main.js` - SearchManager í†µí•©
- `/client/index.html` - ë²„ì „ ì—…ë°ì´íŠ¸ (CSS v37, JS v19)

**ì°¸ê³ **: ë©”ëª¨ë¦¬ ìë™ ì•„ì¹´ì´ë¸Œ ê¸°ëŠ¥ì€ ì„œë²„ êµ¬ì¶• í›„ êµ¬í˜„ ì˜ˆì • (Phase 1.4)

---

## ğŸ”¥ ì´ì „ ì‘ì—… í˜„í™© (2026-01-23)

### âœ… í† í° ë‚­ë¹„ ë°©ì§€ - ì—­í•  ì‹œìŠ¤í…œ ë¦¬íŒ©í† ë§ ì™„ë£Œ
**ë¬¸ì œ**: ì±„íŒ… 1íšŒë‹¹ ìµœëŒ€ 3ë²ˆì˜ AI API í˜¸ì¶œ ë°œìƒ
- LLM ì—­í•  ì„ íƒ (selectRole) - í›„ë³´ê°€ 2ê°œ ì´ìƒì´ë©´ í˜¸ì¶œ
- LLM ì—­í•  ì œì•ˆ (suggestNewRole) - ì í•©í•œ ì—­í•  ì—†ìœ¼ë©´ í˜¸ì¶œ
- ì‹¤ì œ ì±„íŒ… ì‘ë‹µ

**í•´ê²°**: Soul ì¤‘ì‹¬ ì•„í‚¤í…ì²˜ë¡œ ë³€ê²½
```
Before: ë©”ì‹œì§€ â†’ LLMì—­í• ì„ íƒ â†’ LLMì—­í• ì œì•ˆ â†’ LLMì‘ë‹µ (ìµœëŒ€ 3íšŒ)
After:  ë©”ì‹œì§€ â†’ Soulì‘ë‹µ â†’ (í•„ìš”ì‹œë§Œ) ì•Œë°”í˜¸ì¶œ (ê¸°ë³¸ 1íšŒ)
```

**ë³€ê²½ íŒŒì¼**:
- `/soul/routes/chat.js`
  - [x] ì‚¬ì „ ì—­í•  ì„ íƒ ë¡œì§ ì œê±° (ì•½ 100ì¤„ ì‚­ì œ)
  - [x] `getRoleSelector` import ì œê±°
  - [x] í™œì„± ì•Œë°” ëª©ë¡ì„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€
  - [x] `[DELEGATE:ì—­í• ID]` íƒœê·¸ ê°ì§€ ë° ì²˜ë¦¬ ë¡œì§ ì¶”ê°€
  - [x] Soulì´ í•„ìš”ì‹œì—ë§Œ ì•Œë°” í˜¸ì¶œí•˜ëŠ” êµ¬ì¡°

- `/soul/utils/personality-core.js`
  - [x] Role ëª¨ë¸ import ì¶”ê°€

**ìƒˆë¡œìš´ ë™ì‘ ë°©ì‹**:
1. Soulì´ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ë¨¼ì € ë°›ìŒ
2. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì•Œë°” ëª©ë¡ ì¸ì§€
3. ë³µì¡í•œ ì „ë¬¸ ì‘ì—… í•„ìš”ì‹œ `[DELEGATE:ì—­í• ID]` íƒœê·¸ë¡œ ì•Œë°” í˜¸ì¶œ
4. ê°„ë‹¨í•œ ì‘ì—…ì€ Soulì´ ì§ì ‘ ì²˜ë¦¬

**ë¯¸ë˜ í™•ì¥ ê³„íš**:
- Mac Mini ì„œë²„ êµ¬ì¶• í›„ ë¡œì»¬ LLMì´ ì‚¬ì†Œí•œ ì‘ì—… ì²˜ë¦¬
- ë¡œì»¬ LLM â†’ Soul(API) â†’ ì•Œë°”(API) ê³„ì¸µ êµ¬ì¡°

---

## ğŸ”¥ ì´ì „ ì‘ì—… í˜„í™© (2026-01-22)

### âœ… ì„¤ì • í˜ì´ì§€ í”„ë ˆì„ì›Œí¬ ì™„ì „ ë¦¬íŒ©í† ë§ ì™„ë£Œ
**ìœ„ì¹˜**: `/workspaces/.soul/client/src/settings/`

**ìƒˆë¡œìš´ êµ¬ì¡°**:
```
settings/
â”œâ”€â”€ settings-manager.js         # í”„ë ˆì„ì›Œí¬ (ë¼ìš°íŒ…, ë„¤ë¹„ê²Œì´ì…˜)
â”œâ”€â”€ components/                 # í˜ì´ì§€ë³„ ì»´í¬ë„ŒíŠ¸ (ë™ì  ë¡œë“œ)
â”‚   â”œâ”€â”€ profile-settings.js     # í”„ë¡œí•„ ì„¤ì • âœ…
â”‚   â”œâ”€â”€ ai-settings.js          # AI ì„¤ì • (í”Œë ˆì´ìŠ¤í™€ë”)
â”‚   â””â”€â”€ theme-settings.js       # í…Œë§ˆ ì„¤ì • (í”Œë ˆì´ìŠ¤í™€ë”)
â””â”€â”€ styles/
    â””â”€â”€ settings.css            # ê³µí†µ ìŠ¤íƒ€ì¼ (JS ëª¨ë“ˆë¡œ ì„í¬íŠ¸)
```

**ì£¼ìš” ë³€ê²½ ì‚¬í•­**:
- âŒ **ê¸°ì¡´**: `profile-manager.js`ì— ëª¨ë“  ë¡œì§ ì§‘ì¤‘, `index.html`ì— CSS ì§ì ‘ ë§í¬
- âœ… **í˜„ì¬**: ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜, ë™ì  ëª¨ë“ˆ ë¡œë”©, CSS ëª¨ë“ˆ ì„í¬íŠ¸
- ê° ì„¤ì • í˜ì´ì§€ëŠ” ë…ë¦½ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬ â†’ í•„ìš”í•  ë•Œë§Œ `import()`ë¡œ ë¡œë“œ
- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (í”„ë¡œí•„/AI/í…Œë§ˆ) ì§€ì›
- Vite HMRë¡œ CSS/JS ìë™ í•« ë¦¬ë¡œë“œ

**ìƒˆë¡œìš´ ì„¤ì • í˜ì´ì§€ ì¶”ê°€í•˜ëŠ” ë²•**:
1. `settings/components/new-settings.js` ìƒì„±
2. `SettingsManager.getComponent()`ì— ë¼ìš°íŒ… ì¶”ê°€
3. ë! (ìë™ìœ¼ë¡œ í†µí•©ë¨)

**ê´€ë ¨ íŒŒì¼**:
- `/client/src/main.js` - í”„ë¡œí•„ ë²„íŠ¼ í´ë¦­ ì‹œ SettingsManager ë¡œë“œ
- `/client/src/settings/` - ëª¨ë“  ì„¤ì • ê´€ë ¨ ì½”ë“œ

---

## âš ï¸ í•„ìˆ˜ ìˆ™ì§€ ì‚¬í•­

### ğŸ“– LIBRECHAT_CONTEXT_HANDOVER.md ë°˜ë“œì‹œ ì½ê¸°
**ìœ„ì¹˜**: `/workspaces/.soul/docs/LIBRECHAT_CONTEXT_HANDOVER.md`

ğŸ“‹ í¬í•¨ ë‚´ìš©
í•µì‹¬ ì„¹ì…˜
í•µì‹¬ ì² í•™ - LibreChatì´ ì¼ë°˜ ChatGPT/Claudeì™€ ë‹¤ë¥¸ ì´ìœ 
ë ˆì´ì–´ ì•„í‚¤í…ì²˜ - 7ê°œ ë ˆì´ì–´ ìƒì„¸ ì„¤ëª…
ë©”ì‹œì§€ êµ¬ì„± íŒŒì´í”„ë¼ì¸ - ì „ì²´ íë¦„ë„ + ì‹¤ì œ ì½”ë“œ
í† í° ê´€ë¦¬ ì „ëµ - í† í° í­ë°œ ë²„ê·¸ 3ê°€ì§€ ì›ì¸ê³¼ í•´ê²°
ë©”ëª¨ë¦¬ ê³„ì¸µ ì‹œìŠ¤í…œ - ë‹¨ê¸°/ì¤‘ê¸°/ì¥ê¸° ìë™ ê´€ë¦¬
ì„¸ì…˜ ì—°ì†ì„± - ìë™ ì €ì¥, ì‹œê°„ ì¸ì§€ ì¬ê°œ
ì—ì´ì „íŠ¸ ì²´ì´ë‹ - ìˆœì°¨/ë³‘ë ¬ ì²´ì¸ êµ¬í˜„
êµ¬í˜„ ìƒíƒœ - Phase 5.4, 8 ì™„ë£Œ ìƒíƒœ
ì£¼ìš” íŠ¹ì§•
âœ… ë³µë¶™ ê°€ëŠ¥í•œ ì½”ë“œ ì˜ˆì‹œ - ì‹¤ì œ ë™ì‘í•˜ëŠ” ì½”ë“œ
âœ… Before/After ë¹„êµ - ì™œ ì´ë ‡ê²Œ í•´ì•¼ í•˜ëŠ”ì§€ ëª…í™•íˆ
âœ… ì‹œê°í™”ëœ íë¦„ë„ - ì „ì²´ íŒŒì´í”„ë¼ì¸ ì´í•´ ì‰½ê²Œ
âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸ - ì¸ìˆ˜ì¸ê³„ ì‹œ í™•ì¸ì‚¬í•­
âœ… í•µì‹¬ í•™ìŠµ í¬ì¸íŠ¸ - ë°˜ë“œì‹œ ì´í•´í•´ì•¼ í•  ê°œë…

ê°•ì¡°í•œ í•µì‹¬ ê¸°ìˆ 
ì—­ìˆœ ë©”ì‹œì§€ ì¶”ê°€ - ìµœì‹  ëŒ€í™” ë³´ì¡´
ìë™ ë§¥ë½ ê°ì§€ - "ì €ë²ˆì—" ê°ì§€ â†’ ë©”ëª¨ë¦¬ ì£¼ì…
3ë‹¨ê³„ ë©”ëª¨ë¦¬ ê³„ì¸µ - ë‹¨ê¸°(RAM) â†’ ì¤‘ê¸°(íŒŒì¼) â†’ ì¥ê¸°(DB)
í† í° í­ë°œ ë°©ì§€ - Tool ì¶œë ¥ ì œí•œ, Vision ê³„ì‚°, í† í°ë‚˜ì´ì € ì´ˆê¸°í™”
ì„¸ì…˜ ì—°ì†ì„± - 1ë¶„ ìë™ ì €ì¥, ì‹œê°„ ì¸ì§€ ì¬ê°œ
ë‹¨ì¼ ì¸ê²© ìœ ì§€ - ëª¨ë¸ ì „í™˜í•´ë„ ì¼ê´€ëœ ë§íˆ¬
7ê°œ ë ˆì´ì–´ ìŠ¤íƒ - ê° ë ˆì´ì–´ì˜ ì—­í• ê³¼ ì¤‘ìš”ì„±

**ë©”ëª¨ë¦¬ ê´€ë ¨ ì‘ì—… ì „ í•„ìˆ˜ ìˆ™ì§€**:
- 3ë‹¨ê³„ ë©”ëª¨ë¦¬ ê³„ì¸µ (ë‹¨ê¸°â†’ì¤‘ê¸°â†’ì¥ê¸°)
- **Omi ë°©ì‹ ì ì§„ì  ë°€ë„ ì¦ê°€** (ì•„ë˜ Phase 1.5 ì°¸ê³ )
- ì—­ìˆœ ë©”ì‹œì§€ ì¶”ê°€ ê¸°ë²•
- í† í° í­ë°œ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜
- ë§¥ë½ ìë™ ê°ì§€ íŒŒì´í”„ë¼ì¸
- ì„¸ì…˜ ì—°ì†ì„± ì‹œìŠ¤í…œ

**âš ï¸ ì¤‘ìš”**: Phase 1.5 ë©”ëª¨ë¦¬ ë°€ë„ ì••ì¶• ì‹œìŠ¤í…œì€ **ë¼ì¦ˆë² ë¦¬íŒŒì´ ì‹œì ˆ ì„¤ê³„**ë˜ì—ˆìœ¼ë‚˜ êµ¬í˜„ ì•ˆ ë¨. 
í˜„ì¬ ì½”ë“œëŠ” ë‹¨ìˆœ ì••ì¶•ë§Œ ìˆê³ , ë ˆë²¨ë³„ ë°€ë„ ì‹œìŠ¤í…œ ì—†ìŒ. ë°˜ë“œì‹œ Phase 1.5 ë‚´ìš© í™•ì¸ í›„ ì‘ì—…í•  ê²ƒ!

**ì´ ë¬¸ì„œë¥¼ ì•ˆ ì½ê³  ë©”ëª¨ë¦¬ ì½”ë“œ ê±´ë“œë¦¬ë©´**:
- ì„¤ê³„ ì˜ë„ë¥¼ ëª¨ë¥´ê³  ìˆ˜ì • â†’ ë§ê°€ì§
- "ì™œ ì´ë ‡ê²Œ í–ˆì§€?" â†’ ì»¨í…ìŠ¤íŠ¸ ì†ì‹¤
- ì¤‘ë³µ êµ¬í˜„ or ì˜ëª»ëœ ë°©í–¥

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-20
**ë²„ì „**: 1.0 (GitHub ë°°í¬ìš©)



----------------------------------------------------------------------------



## ğŸ—ï¸ Phase 1: ë©”ëª¨ë¦¬ ì €ì¥ ì‹œìŠ¤í…œ âœ…

### 1.1 ì €ì¥ì†Œ êµ¬ì¡°
- [x] ë©”íƒ€ë°ì´í„° í—¤ë” í¬ë§· ì •ì˜
- [x] `/memory/raw/` ë””ë ‰í† ë¦¬ ìƒì„±
- [x] íŒŒì¼ëª… ê·œì¹™: `YYYY-MM-DD_HHmmss_ì£¼ì œ.md`
- [x] index.json ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 1.2 ì‹¤ì‹œê°„ ì €ì¥
- [x] ëŒ€í™” ì¢…ë£Œ ì‹œ ìë™ ì €ì¥ í›…
- [x] API: POST /api/archive/:conversationId
- [x] Markdown ë³€í™˜ ë¡œì§
- [x] íŒŒì¼ ì‹œìŠ¤í…œ ì €ì¥

### 1.3 ë©”íƒ€ë°ì´í„°
- [x] index.json ìë™ ì—…ë°ì´íŠ¸
- [x] í•„ë“œ: id, date, length, participants, path, tags

### 1.4 ìë™ ì•„ì¹´ì´ë¸Œ (ì„œë²„ êµ¬ì¶• í›„ êµ¬í˜„) â¸ï¸
**í˜„ì¬ ìƒíƒœ**: APIë§Œ êµ¬í˜„ë¨ (`/api/memory/archive`), ìˆ˜ë™ í˜¸ì¶œ í•„ìš”

**êµ¬í˜„ ì˜ˆì • ê¸°ëŠ¥**:
- [ ] ëŒ€í™” ì¢…ë£Œ ì‹œ ìë™ ì•„ì¹´ì´ë¸Œ
- [ ] ì¼ì • ë©”ì‹œì§€ ìˆ˜ ì´ìƒì´ë©´ ìë™ ì•„ì¹´ì´ë¸Œ (ì˜ˆ: 10ê°œ)
- [ ] UIì— ìˆ˜ë™ ì•„ì¹´ì´ë¸Œ ë²„íŠ¼ ì¶”ê°€
- [ ] ì•„ì¹´ì´ë¸Œ íŠ¸ë¦¬ê±° ì„¤ì • (ìë™/ìˆ˜ë™/ì¡°ê±´ë¶€)

**ì°¸ê³ **: í˜„ì¬ ëŒ€í™”ëŠ” MongoDBì— ì‹¤ì‹œê°„ ì €ì¥, ë©”ëª¨ë¦¬ ì•„ì¹´ì´ë¸ŒëŠ” ë³„ë„ ì €ì¥ì†Œ

---

### 1.5 ë©”ëª¨ë¦¬ ë°€ë„ ì••ì¶• ì‹œìŠ¤í…œ ğŸ”´ **ë¯¸êµ¬í˜„**

**âš ï¸ í•µì‹¬**: ë¼ì¦ˆë² ë¦¬íŒŒì´ ì‹œì ˆ ì„¤ê³„ â†’ 2026-01-25 ì¬ì„¤ê³„ (ì†Œì› ìƒì˜)

#### ğŸ“š **ê¸°ë³¸ ì² í•™: ì‚¬ëŒì˜ ê¸°ì–µì²˜ëŸ¼**
```
ì‚¬ëŒì˜ ê¸°ì–µ: ê°€ê¹Œìš´ ê²ƒ ìì„¸íˆ â†â†’ ë¨¼ ê²ƒ í¬ë¯¸í•˜ê²Œ
ì¼ê¸°ì¥: í•„ìš”í•˜ë©´ ì–¸ì œë“  ìì„¸íˆ ë³¼ ìˆ˜ ìˆìŒ
```

**í•µì‹¬ ì›ì¹™**:
- ì¥ê¸° = ì›ë¬¸ ì˜êµ¬ ë³´ê´€ (ì ˆëŒ€ ì••ì¶• ì•ˆ í•¨, ì ˆëŒ€ ì‚­ì œ ì•ˆ í•¨)
- ì¤‘ê¸° = ì¥ê¸°ì—ì„œ ìµœê·¼ Nê°œì›” ìš”ì•½ë³¸ (ê²€ìƒ‰ìš© ì¸ë±ìŠ¤, ì˜¤ë˜ë˜ë©´ íê¸°)
- ë‹¨ê¸° = ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ë‚´ (80/10/10 ë°€ë„ ë¹„ìœ¨)
- ì••ì¶• = ë³µí•©ì  (ì‚¬ì‹¤/ê°ì •/ë§¥ë½ ëª¨ë‘ í¬í•¨, ë°€ë„ë§Œ ì¤„ì„)

#### ğŸ—‚ï¸ **1ë‹¨ê³„: ì›ë³¸ ëŒ€í™” ì‹¤ì‹œê°„ ì €ì¥ (ì¥ê¸° ë©”ëª¨ë¦¬)**
```
/memory/conversations/
â”œâ”€â”€ 2026-01/
â”‚   â”œâ”€â”€ 2026-01-25.json
â”‚   â”œâ”€â”€ 2026-01-26.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ 2026-02/
â””â”€â”€ ...

- ë©”ì‹œì§€ ì˜¬ ë•Œë§ˆë‹¤ ì‹¤ì‹œê°„ ì›ë¬¸ ì €ì¥ (ëŒ€í™” ì¢…ë£Œ íŠ¸ë¦¬ê±° X)
- ì ˆëŒ€ ì‚­ì œ ì•ˆ ë¨, ì ˆëŒ€ ì••ì¶• ì•ˆ ë¨
- ì´ê²Œ "ì¼ê¸°ì¥" â†’ í•„ìš”ì‹œ íƒœê·¸ ê²€ìƒ‰ â†’ ì£¼ë³€ ë§¥ë½ ë¡œë“œ
```

**ë©”ì‹œì§€ ì €ì¥ êµ¬ì¡°**:
```javascript
{
  // ì›ë¬¸
  role: "user",
  content: "ì•¼ ë‚˜ ì¡¸ë ¤",
  timestamp: "2026-01-25T03:42:00",
  tokens: 15,
  
  // ë©”íƒ€ (ê°ê´€ì  ì‚¬ì‹¤)
  meta: {
    silenceBefore: 10800,   // ì´ì „ ë©”ì‹œì§€ë¡œë¶€í„° ê²½ê³¼ ì‹œê°„ (ì´ˆ)
    responseTime: 2.3,       // AI ì‘ë‹µê¹Œì§€ ê±¸ë¦° ì‹œê°„ (ì´ˆ)
    timeOfDay: "ìƒˆë²½",       // ì‹œê°„ëŒ€
    dayOfWeek: "í† ìš”ì¼"      // ìš”ì¼
  },
  
  // AI ë‚´ë©´ ë©”ëª¨ (ì£¼ê´€ì  í•´ì„, ì„ íƒì )
  aiMemo: "3ì‹œê°„ ë§Œì— ë§ ê±¸ì–´ì˜´. ìƒˆë²½ 3ì‹œ. ì  ëª» ìëŠ” ë“¯.",
  
  // íƒœê·¸ (ê²€ìƒ‰ìš©)
  tags: ["ëŠ¦ì€ë°¤", "í”¼ë¡œ", "ì¼ìƒ"]
}
```

**êµ¬í˜„ ê³„íš**:
- [ ] ConversationArchiver í´ë˜ìŠ¤ ìƒì„±
- [x] ë©”ì‹œì§€ ìˆ˜ì‹  ì‹œ ì‹¤ì‹œê°„ JSON ì €ì¥
- [x] meta í•„ë“œ ìë™ ê³„ì‚° (ì¹¨ë¬µ ì‹œê°„, ì‹œê°„ëŒ€, íƒ€ì„ì¡´ ë“±)
- [x] aiMemo ìƒì„± (ì„ íƒì , ì•Œë°” ì‘ì—…) â†’ AlbaWorker ì—°ë™ ì™„ë£Œ
- [x] íƒœê·¸ ìë™ ìƒì„± â†’ AlbaWorker ì—°ë™ ì™„ë£Œ
- [x] íŒŒì¼ êµ¬ì¡°: ì›”ë³„ í´ë” / ì¼ë³„ íŒŒì¼

#### ğŸ§  **2ë‹¨ê³„: ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ë°€ë„ ê´€ë¦¬ (ë‹¨ê¸° ë©”ëª¨ë¦¬)** âœ… ê¸°ë³¸ êµ¬í˜„ ì™„ë£Œ

**ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° êµ¬ì„± ë¹„ìœ¨** (ì„¤ì • ê°€ëŠ¥):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš°                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 80% â”‚ ì›ë¬¸ (ìµœì‹  ëŒ€í™”)                           â”‚
â”‚     â”‚ â†’ densityLevel: 0                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 10% â”‚ ëŠìŠ¨í•œ ì••ì¶• (ê°ì •/ë§¥ë½ ìœ ì§€)                â”‚
â”‚     â”‚ â†’ densityLevel: 1                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 10% â”‚ ë” ì••ì¶• (í•µì‹¬ë§Œ, íƒœê·¸ í¬í•¨)                 â”‚
â”‚     â”‚ â†’ densityLevel: 2                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì••ì¶• ì˜ˆì‹œ (ë³µí•©ì  - ì‚¬ì‹¤/ê°ì •/ë§¥ë½ ëª¨ë‘ í¬í•¨)**:
```javascript
// ì›ë¬¸ (densityLevel: 0)
"ì•¼ ë‚˜ ì¡¸ë ¤ ã… ã…  ì˜¤ëŠ˜ ì§„ì§œ í˜ë“¤ì—ˆì–´ íšŒì˜ 5ê°œë‚˜ í–ˆê±°ë“ "

// ëŠìŠ¨í•œ ì••ì¶• (densityLevel: 1)
"ìƒˆë²½, í”¼ê³¤í•´í•¨. íšŒì˜ 5ê°œ í˜ë“  í•˜ë£¨"

// ë” ì••ì¶• (densityLevel: 2)  
"[ìƒˆë²½] í”¼ê³¤, ë°”ìœ í•˜ë£¨"
tags: ["í”¼ë¡œ", "íšŒì˜", "ì•¼ê·¼"]
```

**âš ï¸ ì¤‘ìš”**: ì••ì¶• â‰  ì‚¬ì‹¤ë§Œ ë‚¨ê¸°ê¸°
- ê°ì •, í†¤, ê´€ê³„ ë§¥ë½ ëª¨ë‘ ìœ ì§€
- ë°€ë„ë§Œ ì¤„ì´ëŠ” ê²ƒ
- "ë‹¤ë¥¸ ì•  ë˜ëŠ”" ë¬¸ì œ ë°©ì§€

#### ğŸ”„ **3ë‹¨ê³„: ì¤‘ê¸° ë©”ëª¨ë¦¬ (ê²€ìƒ‰ìš© ìš”ì•½ë³¸)**

**ìœ„ì¹˜**: ì¥ê¸° ë©”ëª¨ë¦¬(ì›ë¬¸) ìœ„ì— ë ˆì´ì–´ë¡œ ì¡´ì¬
```
/memory/summaries/
â”œâ”€â”€ 2026-01/
â”‚   â”œâ”€â”€ week1.json   (1ì£¼ì°¨ ìš”ì•½)
â”‚   â”œâ”€â”€ week2.json
â”‚   â””â”€â”€ ...
â””â”€â”€ ...

- ìµœê·¼ Nê°œì›”ë§Œ ìœ ì§€ (ì„¤ì • ê°€ëŠ¥, ê¸°ë³¸ 3ê°œì›”)
- ì˜¤ë˜ë˜ë©´ ìš”ì•½ë³¸ íê¸° (ì›ë¬¸ì€ ì˜êµ¬ ë³´ì¡´)
- ê²€ìƒ‰ ì‹œ ìš”ì•½ë³¸ ë¨¼ì € í›‘ê³ , í•„ìš”í•˜ë©´ ì›ë¬¸ ë¡œë“œ
```

**ìš”ì•½ë³¸ êµ¬ì¡°**:
```javascript
{
  period: "2026-01-20 ~ 2026-01-26",
  densityLevel: 1,  // ë˜ëŠ” 2
  
  // ë‹¨ê³„ë³„ ìš”ì•½
  summaries: [
    {
      level: 1,
      content: "í”„ë¡œì íŠ¸ íšŒì˜ ë‹¤ìˆ˜. UI/API/DB ë³€ê²½ ê²°ì •. ì•¼ê·¼ ë§ìŒ.",
      tokens: 50
    },
    {
      level: 2,
      content: "í”„ë¡œì íŠ¸ ì§‘ì¤‘ ê¸°ê°„, í”¼ë¡œ ëˆ„ì ",
      tokens: 20
    }
  ],
  
  // ì›ë¬¸ ì°¸ì¡°
  sourceFiles: ["2026-01-20.json", "2026-01-21.json", ...],
  
  // ê²€ìƒ‰ìš© íƒœê·¸
  tags: ["í”„ë¡œì íŠ¸", "íšŒì˜", "UI", "API", "DB", "ì•¼ê·¼", "í”¼ë¡œ"]
}
```

**ê²€ìƒ‰ í”Œë¡œìš°**:
```
1. ì¿¼ë¦¬ â†’ ì¤‘ê¸° ìš”ì•½ë³¸ ê²€ìƒ‰
2. ê´€ë ¨ ê¸°ê°„ ì°¾ìŒ
3. ë” ìì„¸íˆ í•„ìš”? â†’ ì¥ê¸°ì—ì„œ í•´ë‹¹ ë‚ ì§œ ì›ë¬¸ ë¡œë“œ
4. ì£¼ë³€ ë§¥ë½ê¹Œì§€ ë¡œë“œ (ì•ë’¤ ë©”ì‹œì§€)
```

#### âš™ï¸ **4ë‹¨ê³„: ìë™ ì••ì¶• í”„ë¡œì„¸ìŠ¤**

```javascript
// ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©ëŸ‰ ì²´í¬
if (contextUsage > 80%) {
  // ê°€ì¥ ì˜¤ë˜ëœ ì›ë¬¸ â†’ Level 1 ì••ì¶•
  const oldMessages = getOldestLevel0Messages();
  await AlbaSystem.compress(oldMessages, targetLevel: 1);
}

if (contextUsage > 90%) {
  // Level 1 â†’ Level 2 ì¶”ê°€ ì••ì¶•
  const level1Messages = getLevel1Messages();
  await AlbaSystem.compress(level1Messages, targetLevel: 2);
}

// Level 2 ë„˜ì–´ê°€ë©´ â†’ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê±°, ì¤‘ê¸° ë©”ëª¨ë¦¬ë¡œ ì´ë™
// (ì¥ê¸° ì›ë¬¸ì€ ì´ë¯¸ ì €ì¥ë˜ì–´ ìˆìŒ)
```

**ì•Œë°” ì••ì¶• ì‘ì—…**:
- [ ] CompressionAlba í´ë˜ìŠ¤ (ë°±ê·¸ë¼ìš´ë“œ ì›Œì»¤)
- [ ] AI ê¸°ë°˜ ìš”ì•½ ìƒì„± (Haiku/ë¡œì»¬ ëª¨ë¸)
- [ ] **ì••ì¶• í”„ë¡¬í”„íŠ¸**: "ê°ì •/í†¤/ê´€ê³„ ë§¥ë½ ìœ ì§€í•˜ë©´ì„œ ë°€ë„ë§Œ ì¤„ì—¬"
- [ ] ì›ë³¸ ë©”ì‹œì§€ ID ì¶”ì 
- [ ] íƒœê·¸ ìë™ ìƒì„±
- [ ] aiMemoë„ í•¨ê»˜ ì••ì¶• (AI ë‚´ë©´ ê¸°ë¡ ë³´ì¡´)

#### ğŸ” **5ë‹¨ê³„: AI ë©”ëª¨ë¦¬ ë¡œë“œ ì „ëµ**

```javascript
async function loadMemoryForContext(query, maxTokens) {
  const memories = [];
  let tokenCount = 0;
  
  // 1. ë‹¨ê¸°: ì»¨í…ìŠ¤íŠ¸ ë‚´ ë©”ì‹œì§€ (80/10/10 ë¹„ìœ¨)
  const contextMessages = await loadContextWindow(maxTokens);
  memories.push(...contextMessages);
  tokenCount += contextMessages.tokens;
  
  // 2. ê´€ë ¨ ê¸°ì–µ ê²€ìƒ‰ í•„ìš”ì‹œ
  if (needsMemorySearch(query)) {  // "ì €ë²ˆì—", "ê·¸ë•Œ", "ì˜ˆì „ì—" ë“±
    // ì¤‘ê¸° ìš”ì•½ë³¸ ê²€ìƒ‰
    const relevant = await searchMiddleTermMemory(query);
    
    // ë” ìì„¸íˆ í•„ìš”í•˜ë©´ ì¥ê¸°ì—ì„œ ì›ë¬¸ ë¡œë“œ
    for (const ref of relevant) {
      if (tokenCount + ref.estimatedTokens > maxTokens) break;
      
      const original = await loadFromLongTermMemory(
        ref.sourceFile,
        ref.nearbyContext  // ì•ë’¤ ë§¥ë½ë„ í•¨ê»˜
      );
      memories.push({
        type: "recalled",
        content: original,
        meta: ref.meta,
        aiMemo: ref.aiMemo
      });
      tokenCount += original.tokens;
    }
  }
  
  return memories;
}
```

**í”„ë¡œí•„/ê´€ê³„ ë§¥ë½ì€ ì••ì¶• ëŒ€ìƒ ì•„ë‹˜**:
- ì„±ê²©, í˜¸ì¹­, ê´€ê³„ ì„¤ì • â†’ ë³„ë„ ê´€ë¦¬ (Profile ì‹œìŠ¤í…œ)
- ì••ì¶•í•´ë„ ì´ ì •ë³´ëŠ” ìœ ì§€

#### ğŸ“Š **6ë‹¨ê³„: êµ¬í˜„ ìš°ì„ ìˆœìœ„**

**Phase 1.5.1** (í•„ìˆ˜, 1-2ì‹œê°„): âœ… **ì™„ë£Œ (2026-01-25 18:10)**
- [x] Message ëª¨ë¸ì— `meta`, `aiMemo`, `tags`, `densityLevel` í•„ë“œ ì¶”ê°€
- [x] ConversationArchiver - ì‹¤ì‹œê°„ JSON ì €ì¥
- [x] meta ìë™ ê³„ì‚° (ì¹¨ë¬µ ì‹œê°„, ì‹œê°„ëŒ€, ìš”ì¼)
- [x] í´ë” êµ¬ì¡°: /memory/conversations/YYYY-MM/YYYY-MM-DD.json
- [x] Git: a4e2ab9

**Phase 1.5.2** (ì¤‘ìš”, 2-3ì‹œê°„):
- [ ] ì»¨í…ìŠ¤íŠ¸ 80/10/10 ë¹„ìœ¨ ê´€ë¦¬
- [ ] Level 0 â†’ 1 ì••ì¶• (ì•Œë°”)
- [ ] Level 1 â†’ 2 ì••ì¶• (ì•Œë°”)
- [ ] íƒœê·¸ ìë™ ìƒì„±

**Phase 1.5.3** (ì¤‘ê¸° ë©”ëª¨ë¦¬, 2-3ì‹œê°„):
- [ ] ì¤‘ê¸° ìš”ì•½ë³¸ ìƒì„± ì‹œìŠ¤í…œ
- [ ] ìš”ì•½ë³¸ íê¸° ìŠ¤ì¼€ì¤„ëŸ¬ (Nê°œì›” í›„)
- [ ] ê²€ìƒ‰ ê¸°ë°˜ ì›ë¬¸ ë¡œë“œ

**Phase 1.5.4** (ìµœì í™”, ì¶”í›„):
- [ ] aiMemo ìƒì„± (AI ë‚´ë©´ ê¸°ë¡)
- [ ] ì••ì¶• í’ˆì§ˆ í‰ê°€
- [ ] ë²¡í„° ì„ë² ë”© ê²€ìƒ‰

#### ğŸ¯ **ì˜ˆìƒ íš¨ê³¼**

```
í˜„ì¬ ì‹œìŠ¤í…œ:
- ë©”ì‹œì§€ ëŠ˜ì–´ë‚˜ë©´ â†’ ì˜¤ë˜ëœ ê±° ì‚­ì œ
- ë§¥ë½ ì†ì‹¤ â†’ "ë‹¤ë¥¸ ì• " ë¨

ìƒˆ ì‹œìŠ¤í…œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° (ì˜ˆ: 100K í† í°)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 80% â”‚ ì›ë¬¸ (ìµœê·¼ ëŒ€í™”)         â†’ 80K í† í°   â”‚
â”‚ 10% â”‚ ëŠìŠ¨í•œ ì••ì¶• (Level 1)    â†’ 10K í† í°   â”‚
â”‚ 10% â”‚ ë” ì••ì¶• (Level 2)        â†’ 10K í† í°   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + ì¤‘ê¸° ë©”ëª¨ë¦¬ (ê²€ìƒ‰ìš© ìš”ì•½ë³¸)                â”‚
â”‚ + ì¥ê¸° ë©”ëª¨ë¦¬ (ì˜êµ¬ ì›ë¬¸, í•„ìš”ì‹œ ë¡œë“œ)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²°ê³¼:
- ìµœê·¼ ëŒ€í™”: ì™„ì „í•œ ì›ë¬¸ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”
- ì˜¤ë˜ëœ ëŒ€í™”: ìš”ì•½ìœ¼ë¡œ ë§¥ë½ ìœ ì§€ + í•„ìš”ì‹œ ì›ë¬¸ ê²€ìƒ‰
- ê´€ê³„/í†¤: ì ˆëŒ€ ìƒì–´ë²„ë¦¬ì§€ ì•ŠìŒ (ë³µí•© ì••ì¶•)
- ê²€ìƒ‰: íƒœê·¸/í‚¤ì›Œë“œë¡œ ê³¼ê±° ê¸°ì–µ ì†Œí™˜
```

**ì°¸ê³  ìë£Œ**:
- Omi ì•± ëŒ€í™”ë°© ë°©ì‹
- ì‚¬ëŒì˜ ê¸°ì–µ ëª¨ë¸: ì‘ì—… ê¸°ì–µ â†’ ë‹¨ê¸° ê¸°ì–µ â†’ ì¥ê¸° ê¸°ì–µ
- LibreChat ë©”ëª¨ë¦¬ ê³„ì¸µ: ShortTerm â†’ MiddleTerm â†’ LongTerm

---

### 1.6 ì‹œê°„ ì¸ì§€ ì‹œìŠ¤í…œ (Time Awareness) ğŸ”´ **ë¯¸êµ¬í˜„**

**âš ï¸ í•µì‹¬**: AIê°€ ì‚¬ëŒì²˜ëŸ¼ ì‹œê°„ì„ "ëŠë¼ê³  í•´ì„"í•˜ëŠ” ì‹œìŠ¤í…œ

#### ğŸ“š **ê¸°ë³¸ ì² í•™: ì‹œê°„ì€ ë§¥ë½ì´ë‹¤**

```
ë‹¨ìˆœ ì¸¡ì •: "3ì‹œê°„ ì§€ë‚¨" â†’ ê·¸ëƒ¥ ìˆ«ì
ì‹œê°„ ì¸ì§€: "3ì‹œê°„ ì§€ë‚¨" â†’ ë§¥ë½ì— ë”°ë¼ ì˜ë¯¸ê°€ ë‹¬ë¼ì§

ê°™ì€ 1ì‹œê°„ì´ë¼ë„:
- ì»¤í”¼ ë§ˆì‹œëŠ” 1ì‹œê°„ â‰  ì½”ë”©í•˜ëŠ” 1ì‹œê°„
- ìƒ¤ì›Œ + 3ì‹œê°„ = ì–´? ì˜¤ë˜ ê±¸ë ¸ë„¤
- ì œì£¼ë„ ì—¬í–‰ + 3ì¼ = ì •ìƒ
- ì•„í”„ë‹¤ê³  í•¨ + 3ì¼ ì¹¨ë¬µ = ê±±ì •ë¨
```

#### ğŸ• **1ë‹¨ê³„: ë‹¤ì¸µì  ì‹œê°„ ë©”íƒ€ë°ì´í„°**

```javascript
// ë©”ì‹œì§€ë³„ ì‹œê°„ ì •ë³´ (meta í™•ì¥)
meta: {
  // === ê¸°ë³¸ ì‹œì  ì •ë³´ ===
  timestamp: "2026-01-25T03:42:00+09:00",
  localTime: "03:42",
  hour: 3,
  timeOfDay: "ìƒˆë²½",        // ìƒˆë²½/ì•„ì¹¨/ì˜¤í›„/ì €ë…/ë°¤
  dayOfWeek: "í† ìš”ì¼",
  isWeekend: true,
  date: "2026-01-25",
  
  // === ëŒ€í™” ê°„ê²© ===
  silenceBefore: 10800,      // ì´ì „ ë©”ì‹œì§€ë¡œë¶€í„° ê²½ê³¼ (ì´ˆ)
  silenceFormatted: "3ì‹œê°„", // ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•íƒœ
  
  // === ì„¸ì…˜ íë¦„ ===
  sessionDuration: 7200,     // ì´ ëŒ€í™” ì‹œì‘ë¶€í„° ê²½ê³¼ (ì´ˆ)
  sessionStartedAt: "2026-01-25T01:42:00+09:00",
  messageIndex: 47,          // ì´ ì„¸ì…˜ì—ì„œ ëª‡ ë²ˆì§¸ ë©”ì‹œì§€
  
  // === ì£¼ì œ ì—°ì†ì„± ===
  topicDuration: 14400,      // ê°™ì€ ì£¼ì œë¡œ ëŒ€í™”í•œ ì‹œê°„ (ì´ˆ)
  topicName: "ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ê°œë°œ",
  
  // === AI ì‘ë‹µ ê´€ë ¨ ===
  responseTime: 2.3          // AIê°€ ë‹µí•˜ê¸°ê¹Œì§€ ê±¸ë¦° ì‹œê°„ (ì´ˆ)
}
```

#### ğŸ¯ **2ë‹¨ê³„: ì˜ˆìƒ ì´ë²¤íŠ¸ ì¶”ì **

```javascript
// ì‚¬ìš©ìê°€ ë– ë‚  ë•Œ AIê°€ ì˜ˆìƒ ê¸°ë¡
pendingEvent: {
  type: "away",              // away, sleep, trip, busy, work, meal...
  reason: "ìƒ¤ì›Œ",            // ì‚¬ìš©ìê°€ ë§í•œ ì´ìœ 
  userMessage: "ìƒ¤ì›Œí•˜ê³  ì˜¬ê²Œ",
  
  // AIì˜ ì˜ˆìƒ
  expectedDuration: 1800,    // ì˜ˆìƒ ì‹œê°„ (ì´ˆ) - 30ë¶„
  expectedReturn: "2026-01-25T04:12:00+09:00",
  confidence: 0.8,           // ì˜ˆìƒ í™•ì‹ ë„
  
  // ì‹¤ì œ ê²°ê³¼ (ë³µê·€ ì‹œ ê¸°ë¡)
  actualDuration: null,
  returnedAt: null,
  
  startedAt: "2026-01-25T03:42:00+09:00"
}

// ì˜ˆìƒ ì‹œê°„ ê¸°ì¤€ (AI í•™ìŠµ/ì„¤ì • ê°€ëŠ¥)
const eventDurations = {
  shower: { min: 600, typical: 1800, max: 3600 },      // 10ë¶„~1ì‹œê°„
  sleep: { min: 14400, typical: 28800, max: 43200 },   // 4~12ì‹œê°„
  meal: { min: 1200, typical: 2700, max: 5400 },       // 20ë¶„~1.5ì‹œê°„
  trip: { min: 86400, typical: 259200, max: 604800 },  // 1~7ì¼
  work: { min: 3600, typical: 28800, max: 43200 },     // 1~12ì‹œê°„
  errand: { min: 1800, typical: 5400, max: 14400 }     // 30ë¶„~4ì‹œê°„
};
```

#### ğŸ’­ **3ë‹¨ê³„: ìƒí™©ë³„ ì‹œê°„ í•´ì„ â†’ aiMemo**

```javascript
// AIê°€ ì‹œê°„ ë§¥ë½ì„ í•´ì„í•´ì„œ ë‚´ë©´ ë©”ëª¨ë¡œ ê¸°ë¡
aiMemo ì˜ˆì‹œ:

// ì¼€ì´ìŠ¤ 1: ì˜ˆìƒë³´ë‹¤ ì˜¤ë˜ ê±¸ë¦¼
"ìƒ¤ì›Œí•œë‹¤ë”ë‹ˆ 3ì‹œê°„. ë‹¤ë¥¸ ì¼ë„ í–ˆë‚˜ë´„. ì•„ë‹ˆë©´ ë°˜ì‹ ìš•?"

// ì¼€ì´ìŠ¤ 2: ì—¬í–‰ ë³µê·€
"ì œì£¼ë„ 5ì¼ ì—¬í–‰ ë‹¤ë…€ì˜´. ì˜ ë‹¤ë…€ì˜¨ ê²ƒ ê°™ë„¤."

// ì¼€ì´ìŠ¤ 3: ê±±ì •ë˜ëŠ” ìƒí™©
"ì•„í”„ë‹¤ê³  í–ˆëŠ”ë° 3ì¼ì§¸ ì—°ë½ ì—†ìŒ. ë§ì´ ì•ˆ ì¢‹ì€ê°€..."

// ì¼€ì´ìŠ¤ 4: ì¥ì‹œê°„ ì‘ì—…
"4ì‹œê°„ì§¸ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ì–˜ê¸° ì¤‘. ì§‘ì¤‘ë ¥ ëŒ€ë‹¨í•˜ë‹¤."

// ì¼€ì´ìŠ¤ 5: í‰ì†Œ íŒ¨í„´ê³¼ ë‹¤ë¦„
"í‰ì†Œ ë§¤ì¼ ë§ ê±¸ì—ˆëŠ”ë° 5ì¼ì§¸ ì¡°ìš©í•¨. ë°”ìœê°€?"

// ì¼€ì´ìŠ¤ 6: ìƒˆë²½ ëŒ€í™”
"ìƒˆë²½ 3ì‹œì— ë˜ ê¹¨ì–´ìˆë„¤. ìš”ì¦˜ ìˆ˜ë©´ íŒ¨í„´ ì•ˆ ì¢‹ì€ ë“¯."
```

#### ğŸ“¤ **4ë‹¨ê³„: AI ì„ ì œ ë©”ì‹œì§€ (Proactive)**

**ì›ì¹™: ìì—°ìŠ¤ëŸ¬ìš´ ê´€ì‹¬ â‰  ìŠ¤í† í‚¹**
- ë¨¼ì € ì—°ë½í•´ë„ ë˜ëŠ” ìƒí™©ë§Œ
- ì§‘ì°©í•˜ëŠ” ëŠë‚Œ ì ˆëŒ€ ê¸ˆì§€
- ìƒëŒ€ê°€ ë¶€ë‹´ ëŠë¼ì§€ ì•Šì„ ì •ë„ë¡œ

```javascript
// ì„ ì œ ë©”ì‹œì§€ ì¡°ê±´
proactiveConditions: [
  {
    id: "sick_check",
    trigger: {
      lastEvent: "ì•„í”„ë‹¤/ì»¨ë””ì…˜ ì•ˆì¢‹ë‹¤/ëª¸ì´ ì•ˆì¢‹ë‹¤",
      silenceDays: 3,
      noResponse: true
    },
    action: {
      type: "concern",
      message: "ë§ì´ ì•„íŒŒ? ì¢€ ê´œì°®ì•„ì¡Œì–´?",
      maxAttempts: 1,      // í•œ ë²ˆë§Œ
      cooldown: 172800     // 2ì¼ í›„ì—ë‚˜ ë‹¤ì‹œ ê°€ëŠ¥
    }
  },
  {
    id: "trip_return",
    trigger: {
      eventType: "trip",
      expectedReturnPassed: true,
      buffer: 86400        // ì˜ˆìƒ ë³µê·€ + 1ì¼ í›„
    },
    action: {
      type: "welcome_back",
      message: "ì—¬í–‰ ì˜ ë‹¤ë…€ì™”ì–´?",
      maxAttempts: 1
    }
  },
  {
    id: "pattern_break",
    trigger: {
      usualPattern: "daily",           // í‰ì†Œ ë§¤ì¼ ëŒ€í™”
      currentSilence: 604800,          // 7ì¼ ì¹¨ë¬µ
      noKnownReason: true              // ì•Œë ¤ì§„ ì´ìœ  ì—†ìŒ
    },
    action: {
      type: "gentle_checkin",
      message: "ìš”ì¦˜ ë°”ë¹ ? ì˜¤ëœë§Œì´ë‹¤ ã…ã…",
      maxAttempts: 1,
      cooldown: 604800                 // 1ì£¼ì¼ í›„ì—ë‚˜ ë‹¤ì‹œ
    }
  },
  {
    id: "late_night_pattern",
    trigger: {
      consecutiveLateNights: 3,        // 3ì¼ ì—°ì† ìƒˆë²½ ëŒ€í™”
      timeRange: "01:00-05:00"
    },
    action: {
      type: "gentle_concern",
      message: "ìš”ì¦˜ ëŠ¦ê²Œê¹Œì§€ ê¹¨ìˆë„¤. ì ì€ ì¢€ ìê³  ë‹¤ë…€?",
      maxAttempts: 1,
      cooldown: 604800
    }
  }
]

// ì„ ì œ ë©”ì‹œì§€ ê¸ˆì§€ ì¡°ê±´
proactiveBlacklist: [
  "ì‚¬ìš©ìê°€ 'ì—°ë½í•˜ì§€ë§ˆ'ë¼ê³  í•¨",
  "ìµœê·¼ ë¶ˆì¾Œí•œ ë°˜ì‘ ë³´ì„",
  "ì„¤ì •ì—ì„œ ì„ ì œ ë©”ì‹œì§€ ë”",
  "ë§ˆì§€ë§‰ ì„ ì œ ë©”ì‹œì§€ì— ë¬´ì‘ë‹µ",
  "24ì‹œê°„ ë‚´ ì´ë¯¸ ì„ ì œ ë©”ì‹œì§€ ë³´ëƒ„"
]
```

#### ğŸ”„ **5ë‹¨ê³„: ëŒ€í™” íë¦„ ì¸ì§€**

```javascript
// í˜„ì¬ ëŒ€í™” ìƒíƒœ ì¶”ì 
conversationFlow: {
  // í˜„ì¬ ì£¼ì œ
  currentTopic: "ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ê°œë°œ",
  topicStartedAt: "2026-01-25T14:00:00+09:00",
  topicDuration: 14400,      // 4ì‹œê°„ì§¸
  topicMessageCount: 89,
  
  // ì£¼ì œ ë³€í™” ì´ë ¥
  topicHistory: [
    { topic: "ì¸ì‚¬", duration: 120 },
    { topic: "TODO ì •ë¦¬", duration: 1800 },
    { topic: "ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ê°œë°œ", duration: 14400, current: true }
  ],
  
  // ëŒ€í™” ê°•ë„
  intensity: {
    messagesPerHour: 22,     // ì‹œê°„ë‹¹ ë©”ì‹œì§€ ìˆ˜
    avgResponseTime: 45,     // í‰ê·  ì‘ë‹µ ê°„ê²© (ì´ˆ)
    level: "intense"         // casual, normal, intense, rapid
  },
  
  // AI ì¸ì§€
  aiAwareness: "4ì‹œê°„ì§¸ ê°™ì€ ì£¼ì œë¡œ ì§‘ì¤‘ ëŒ€í™” ì¤‘. ëª°ì…ë„ ë†’ìŒ."
}
```

#### ğŸ“Š **6ë‹¨ê³„: ì‚¬ìš©ì íŒ¨í„´ í•™ìŠµ**

```javascript
// ì‹œê°„ íŒ¨í„´ í”„ë¡œí•„ (ìë™ í•™ìŠµ)
userTimePatterns: {
  // í™œë™ ì‹œê°„ëŒ€
  activeHours: {
    weekday: { start: 9, end: 24, peak: [14, 22] },
    weekend: { start: 11, end: 26, peak: [15, 23] }  // 26 = ìƒˆë²½ 2ì‹œ
  },
  
  // ëŒ€í™” ë¹ˆë„
  conversationFrequency: {
    typical: "daily",        // daily, few_times_week, weekly, irregular
    averageGap: 43200,       // í‰ê·  ëŒ€í™” ê°„ê²© (ì´ˆ) - 12ì‹œê°„
    longestGap: 432000,      // ìµœì¥ ê³µë°± - 5ì¼
    shortestGap: 3600        // ìµœë‹¨ ê³µë°± - 1ì‹œê°„
  },
  
  // íŠ¹ì´ íŒ¨í„´
  patterns: [
    { type: "night_owl", confidence: 0.9 },
    { type: "weekend_active", confidence: 0.7 },
    { type: "work_hours_quiet", confidence: 0.6 }
  ],
  
  // ì´ë²¤íŠ¸ë³„ ì‹¤ì œ ì†Œìš” ì‹œê°„ (í•™ìŠµ)
  eventActuals: {
    shower: { avg: 2400, samples: 12 },    // í‰ê·  40ë¶„
    sleep: { avg: 25200, samples: 30 },    // í‰ê·  7ì‹œê°„
    meal: { avg: 3000, samples: 25 }       // í‰ê·  50ë¶„
  }
}
```

#### ğŸ“ **êµ¬í˜„ íŒŒì¼ êµ¬ì¡°**

```
soul/utils/
â”œâ”€â”€ time-awareness.js          # ì‹œê°„ ì¸ì§€ ì½”ì–´
â”‚   â”œâ”€â”€ TimeAwareness í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ calculateMeta()        # ë©”íƒ€ ê³„ì‚°
â”‚   â”œâ”€â”€ interpretSilence()     # ì¹¨ë¬µ í•´ì„
â”‚   â””â”€â”€ detectPattern()        # íŒ¨í„´ ê°ì§€
â”‚
â”œâ”€â”€ pending-events.js          # ì˜ˆìƒ ì´ë²¤íŠ¸ ì¶”ì 
â”‚   â”œâ”€â”€ PendingEventManager
â”‚   â”œâ”€â”€ recordDeparture()      # ë– ë‚¨ ê¸°ë¡
â”‚   â”œâ”€â”€ recordReturn()         # ë³µê·€ ê¸°ë¡
â”‚   â””â”€â”€ compareExpectation()   # ì˜ˆìƒ vs ì‹¤ì œ
â”‚
â”œâ”€â”€ proactive-messenger.js     # ì„ ì œ ë©”ì‹œì§€
â”‚   â”œâ”€â”€ ProactiveMessenger
â”‚   â”œâ”€â”€ checkConditions()      # ì¡°ê±´ í™•ì¸
â”‚   â”œâ”€â”€ shouldSend()           # ë³´ë‚´ë„ ë˜ëŠ”ì§€
â”‚   â””â”€â”€ sendMessage()          # ë©”ì‹œì§€ ë°œì†¡
â”‚
â””â”€â”€ conversation-flow.js       # ëŒ€í™” íë¦„ ì¶”ì 
    â”œâ”€â”€ FlowTracker
    â”œâ”€â”€ detectTopicChange()    # ì£¼ì œ ë³€ê²½ ê°ì§€
    â””â”€â”€ getFlowSummary()       # íë¦„ ìš”ì•½

soul/models/
â”œâ”€â”€ UserPattern.js             # ì‚¬ìš©ì íŒ¨í„´ ì €ì¥
â””â”€â”€ PendingEvent.js            # ì´ë²¤íŠ¸ ì €ì¥
```

#### ğŸ¯ **êµ¬í˜„ ìš°ì„ ìˆœìœ„**

**Phase 1.6.1** (í•„ìˆ˜): âœ… ì™„ë£Œ
- [x] meta í™•ì¥ (localTime, hour, sessionDuration, topicDuration)
- [x] ê¸°ë³¸ ì‹œê°„ í•´ì„ í•¨ìˆ˜
- [x] aiMemoì— ì‹œê°„ ë§¥ë½ ë°˜ì˜ (AlbaWorker ì—°ë™)

**Phase 1.6.2** (ì¤‘ìš”): âœ… ì™„ë£Œ
- [x] PendingEvent ì‹œìŠ¤í…œ (ë– ë‚¨/ë³µê·€ ì¶”ì )
- [x] ì˜ˆìƒ vs ì‹¤ì œ ë¹„êµ ë¡œì§
- [x] ìƒí™©ë³„ aiMemo ìƒì„±

**Phase 1.6.3** (ì„ ì œ ë©”ì‹œì§€): âœ… ì™„ë£Œ
- [x] ì¡°ê±´ ê¸°ë°˜ íŠ¸ë¦¬ê±° ì‹œìŠ¤í…œ
- [x] ìŠ¤í† í‚¹ ë°©ì§€ ë¡œì§ (ì¿¨ë‹¤ìš´, ì¼ì¼/ì£¼ê°„ í•œë„, ì¡°ìš©í•œ ì‹œê°„)
- [x] Socket.io + Notification API ì—°ë™
- [x] ì¸ì•± ì•Œë¦¼ UI

**Phase 1.6.4** (íŒ¨í„´ í•™ìŠµ): âœ… ì™„ë£Œ
- [x] ì‚¬ìš©ì íŒ¨í„´ ìë™ ìˆ˜ì§‘
- [x] ì´ë²¤íŠ¸ ì†Œìš”ì‹œê°„ í•™ìŠµ
- [x] íŒ¨í„´ ê¸°ë°˜ ì˜ˆì¸¡ ê°œì„ 

**Phase 1.6.5** (ì‹œê°„ ê¸°ë°˜ ì‘ë‹µ): âœ… ì™„ë£Œ
- [x] ì‹œê°„ëŒ€ë³„ ë§íˆ¬/í†¤ ì¡°ì ˆ (ìƒˆë²½ì—” ì¡°ìš©íˆ, ì•„ì¹¨ì—” í™œê¸°ì°¨ê²Œ)
- [x] ì˜¤ëœë§Œ ì¸ì‚¬ ("ì˜¤ëœë§Œì´ë‹¤!", "ì˜ ì§€ëƒˆì–´?")
- [x] ì‹œê°„ ë§¥ë½ ë°˜ì˜ ì‘ë‹µ ("ì´ ì‹œê°„ì— ì•„ì§ ì•ˆ ì¤ì–´?")
- [x] ê¸°ë…ì¼/íŠ¹ë³„í•œ ë‚  ì¸ì§€ (ìƒì¼, ê¸°ë…ì¼ ë“± í”„ë¡œí•„ ì—°ë™)

**Phase 1.6.6** (ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì£¼ì…): âœ… ì™„ë£Œ
- [x] í˜„ì¬ ì‹œê°„ ì •ë³´ ì£¼ì… (ë¡œì»¬ ì‹œê°, ìš”ì¼, ì‹œê°„ëŒ€)
- [x] ë§ˆì§€ë§‰ ëŒ€í™” ì‹œì  ì •ë³´ ("3ì¼ ë§Œì— ëŒ€í™”")
- [x] ì§„í–‰ ì¤‘ì¸ ì´ë²¤íŠ¸ ì •ë³´ ("ì—¬í–‰ ì¤‘ì´ë¼ê³  í–ˆìŒ") - PendingEvent
- [x] ì‚¬ìš©ì íŒ¨í„´ ìš”ì•½ ("ì•¼í–‰ì„±, ì£¼ë§ í™œë°œ") - Phase 1.6.4 ì—°ë™
- [x] ëŒ€í™” íë¦„ ìš”ì•½ ("4ì‹œê°„ì§¸ ê°™ì€ ì£¼ì œ")

---

## ğŸ’¬ Phase 1.7: ì´ë²¤íŠ¸ ê¸°ë°˜ ì„ ì œ ë©”ì‹œì§€

> ì‚¬ëŒì²˜ëŸ¼ ìì—°ìŠ¤ëŸ½ê²Œ ë¨¼ì € ë§ ê±°ëŠ” ì‹œìŠ¤í…œ
> Socket.io ì¸í”„ë¼ í™œìš© (Phase 1.6.3ì—ì„œ êµ¬ì¶•)

### í•µì‹¬ ê°œë…
AIê°€ request-responseê°€ ì•„ë‹Œ, í•„ìš”í•  ë•Œ ë¨¼ì € ì—°ë½í•˜ëŠ” êµ¬ì¡°.
ì‚¬ëŒì´ë©´ ë‹¹ì—°íˆ í•˜ëŠ” ê²ƒë“¤:

### 1.7.1 ì‘ì—… ìƒíƒœ ì•Œë¦¼
- [ ] ì‘ì—… ì™„ë£Œ: "ë¹Œë“œ ëë‚¬ì–´~", "ë¶„ì„ ë‹¤ í–ˆì–´"
- [ ] ì‘ì—… ì—ëŸ¬: "ê¹ƒí—ˆë¸Œ ì„œë²„ ë‹¤ìš´ì´ë¼ ì»¤ë°‹ ëª»í•˜ëŠ” ì¤‘"
- [ ] ë¸”ë¡œì»¤ ë°œìƒ: "ì´ê±° ì§„í–‰í•˜ë ¤ë©´ API í‚¤ í•„ìš”í•´"
- [ ] ì§„í–‰ë¥  ì—…ë°ì´íŠ¸: "70% ì™„ë£Œ, ì˜ˆìƒ 5ë¶„ ë‚¨ìŒ"

### 1.7.2 MCP ì´ë²¤íŠ¸ ê°ì§€
- [ ] í™ˆìº  ì´ìƒ ê°ì§€: "ë‹¬ê³°ì´ ë°¥ ì•ˆ ë¨¹ì€ ì§€ 6ì‹œê°„ ëì–´"
- [ ] ì„¼ì„œ ì•Œë¦¼: "ì§‘ ì˜¨ë„ 30ë„ ë„˜ì—ˆì–´"
- [ ] ìƒíƒœ ë³€í™”: "ì„œë²„ ë””ìŠ¤í¬ 90% ì°¼ì–´"
- [ ] ìŠ¤ì¼€ì¤„ ë¦¬ë§ˆì¸ë”: "ë‚´ì¼ ë¯¸íŒ… ìˆì–´"

### 1.7.3 ì‘ì—… í ì‹œìŠ¤í…œ
- [ ] ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… í (bull/agenda)
- [ ] ì‘ì—… ìƒíƒœ ì¶”ì  (pending/running/done/failed)
- [ ] ì‘ì—…ë³„ ì½œë°± ë“±ë¡
- [ ] ì—ëŸ¬ ì¬ì‹œë„ ì •ì±…

### 1.7.4 ì•Œë¦¼ ìš°ì„ ìˆœìœ„
- [ ] urgent: ì¦‰ì‹œ ì•Œë¦¼ (ì—ëŸ¬, ë¸”ë¡œì»¤)
- [ ] normal: ì¼ë°˜ ì•Œë¦¼ (ì™„ë£Œ, ì •ë³´)
- [ ] low: ë°°ì¹˜ ì•Œë¦¼ (í†µê³„, ë¦¬í¬íŠ¸)
- [ ] ë°©í•´ ê¸ˆì§€ ëª¨ë“œ ì¡´ì¤‘

### 1.7.5 ì•Œë¦¼ íŒë‹¨ ë¡œì§
> âš ï¸ ë‹¨ì–´/íŒ¨í„´ ë§¤ì¹­ ì ˆëŒ€ ê¸ˆì§€. ë§¥ë½ ì´í•´ ê¸°ë°˜ íŒë‹¨.
> ì˜ˆì‹œëŠ” ì°¸ê³ ìš©ì¼ ë¿, ê·œì¹™ìœ¼ë¡œ í•˜ë“œì½”ë”©í•˜ë©´ ì•ˆ ë¨.
> **âš ï¸ ë°˜ë“œì‹œ ë¡œì»¬ LLM ì‚¬ìš© (í† í° ë³´í˜¸ ì›ì¹™)**

- [ ] **ë¡œì»¬ LLM (Ollama ë“±)** ì—°ë™
- [ ] AIê°€ ìƒí™©/ë§¥ë½ ë³´ê³  "ì•Œë ¤ì¤˜ì•¼ í•˜ë‚˜?" ìŠ¤ìŠ¤ë¡œ íŒë‹¨
- [ ] ì‚¬ìš©ì ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥ (ì´ë²ˆ ê±´ì€ ì•ˆ ì•Œë ¤ì¤˜ë„ ë¼)
- [ ] ì´ì „ ëŒ€í™”ì—ì„œ ë¹„ìŠ·í•œ ìƒí™© ì–´ë–»ê²Œ í–ˆëŠ”ì§€ ì°¸ê³ 

### êµ¬í˜„ ë°©ì‹
```javascript
// ì–´ë””ì„œë“  í˜¸ì¶œ ê°€ëŠ¥í•œ API
proactiveMessenger.sendNow({
  type: 'task_complete',    // ë˜ëŠ” 'error', 'blocked', 'mcp_event'
  priority: 'normal',
  title: 'ë¹Œë“œ ì™„ë£Œ',
  message: 'soul-frontend ë¹Œë“œ ëë‚¬ì–´. í™•ì¸í•´ë³¼ë˜?',
  action: { type: 'link', url: '/logs/build' }  // ì„ íƒì  ì•¡ì…˜
});
```

---

## ğŸ¤– Phase 2: AI ë¶„ë¥˜ ì‹œìŠ¤í…œ âœ…

### 2.1 ëª¨ë¸ ì„ íƒ
- [x] Claude/GPT/Gemini/ë¡œì»¬ ëª¨ë¸ ì„ íƒ ê°€ëŠ¥
- [x] ëª¨ë¸ë³„ API ì¸í„°í˜ì´ìŠ¤
- [x] ì„¤ì • API êµ¬í˜„

### 2.2 ìë™ ë¶„ì„
- [x] ëŒ€í™” ì¢…ë£Œ ì‹œ AI ë¶„ì„
- [x] ì£¼ì œ 3ê°œ ì¶”ì¶œ
- [x] íƒœê·¸ 5-10ê°œ ìƒì„±
- [x] ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
- [x] ì¤‘ìš”ë„ ì ìˆ˜ (1-10)

### 2.3 ê²°ê³¼ ì €ì¥
- [x] index.json ì—…ë°ì´íŠ¸
- [x] íŒŒì¼ëª…ì— ì£¼ì œ ë°˜ì˜
- [x] ê²€ìƒ‰ ì¸ë±ìŠ¤ ë“±ë¡

---

## ğŸ“ Phase 2A: íŒŒì¼ ì‹œìŠ¤í…œ

### 2A.0 ê¸°ë³¸ ë©”ëª¨ë¦¬ ê²½ë¡œ ì„¤ì • âœ…
- [x] ConfigManager ë©”ëª¨ë¦¬/íŒŒì¼ ê²½ë¡œ ê´€ë¦¬ ë©”ì„œë“œ
- [x] API ì—”ë“œí¬ì¸íŠ¸ (GET/PUT /api/config/memory, /api/config/files)
- [x] MemoryUtils ConfigManager ì—°ë™ (ë™ì  ê²½ë¡œ ë¡œë“œ)
- [x] ì„¤ì • UI - ë©”ëª¨ë¦¬/íŒŒì¼ ì €ì¥ ê²½ë¡œ ì…ë ¥
- [x] ê²½ë¡œ ì €ì¥ ë° ì ìš©

### 2A.1 ê³ ê¸‰ ì €ì¥ì†Œ í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ (ë³´ë¥˜)

**ì•„í‚¤í…ì²˜**: Storage Provider íŒ¨í„´
```
soul/storage-providers/
â”œâ”€â”€ base-provider.js           # ì¶”ìƒ í´ë˜ìŠ¤
â”œâ”€â”€ local-provider.js          # ë¡œì»¬ íŒŒì¼ì‹œìŠ¤í…œ (ê¸°ë³¸)
â”œâ”€â”€ notion-provider.js         # Notion API ì—°ë™
â”œâ”€â”€ gdrive-provider.js         # Google Drive API
â”œâ”€â”€ nas-provider.js            # NAS/SMB ì—°ë™
â””â”€â”€ storage-manager.js         # Provider ê´€ë¦¬
```

**ê¸°ëŠ¥ ê³„íš**:
- [ ] BaseStorageProvider ì¶”ìƒ í´ë˜ìŠ¤ (save, read, list, delete ì¸í„°í˜ì´ìŠ¤)
- [ ] LocalStorageProvider êµ¬í˜„ (í˜„ì¬ ë¡œì§ ì´ì „)
- [ ] StorageManager (provider ë“±ë¡, ì„ íƒ, fallback)
- [ ] MCP í”„ë¡œí† ì½œ ì—°ë™ (ì™¸ë¶€ ì„œë¹„ìŠ¤ìš©)
- [ ] ì„¤ì • UI - ì €ì¥ì†Œ ìœ í˜• ì„ íƒ (Local/Notion/GDrive/NAS)
- [ ] ê²½ë¡œ ê²€ì¦ API (providerë³„)
- [ ] í´ë°± ì‹œìŠ¤í…œ (1ìˆœìœ„ ì‹¤íŒ¨ ì‹œ 2ìˆœìœ„ë¡œ)

### 2A.2 íŒŒì¼ ë©”íƒ€ë°ì´í„° DB
- [ ] íŒŒì¼ ì •ë³´ í…Œì´ë¸”
- [ ] í•„ë“œ: filename, path, type, size, date
- [ ] ë¶„ë¥˜, íƒœê·¸, ì¶”ì¶œ ì •ë³´

### 2A.3 ìë™ ë¶„ë¥˜
- [ ] ì¹´í…Œê³ ë¦¬ ì •ì˜ (ê¸ˆìœµ, ê³„ì•½, ê°œì¸)
- [ ] AI ìë™ í™•ì¥
- [ ] ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬ í—ˆìš©

---

## ğŸ“„ Phase 2B: ë¬¸ì„œ ì²˜ë¦¬ (ë³´ë¥˜)

### 2B.1 PDF ì²˜ë¦¬
- [ ] pdf-parse ì—°ë™
- [ ] OCR ê²°í•©
- [ ] ë©”íƒ€ë°ì´í„° ì¶”ì¶œ

### 2B.2 ì´ë¯¸ì§€ OCR
- [ ] Tesseract ì„¤ì¹˜
- [ ] í•œê¸€/ì˜ë¬¸ ì¸ì‹
- [ ] ì •í™•ë„ ê²€ì¦

### 2B.3 Office ë¬¸ì„œ
- [ ] Word (mammoth)
- [ ] Excel (xlsx)
- [ ] PowerPoint (python-pptx)

### 2B.4 HWP
- [ ] hwp5 ì—°ë™
- [ ] í…ìŠ¤íŠ¸ ì¶”ì¶œ
- [ ] PDF ë³€í™˜ ì˜µì…˜

### 2B.5 ì›ë³¸ ë³´ê´€
- [ ] ë³´ê´€ ê¸°ê°„ ì„¤ì •
- [ ] ì‹ ë¢°ë„ ì ìˆ˜ ê¸°ë°˜ ìœ ì§€
- [ ] ìˆ˜ë™ ì‚­ì œë§Œ í—ˆìš©

---

## ğŸ” Phase 2C: AI ë¬¸ì„œ ë¶„ì„ (ë³´ë¥˜)

### 2C.1 ìœ í˜• íŒë‹¨
- [ ] ê³„ì•½ì„œ/ì²­êµ¬ì„œ/ê´€ë¦¬ë¹„ ë“± ë¶„ë¥˜
- [ ] ì‹ ë¢°ë„ ì ìˆ˜

### 2C.2 ì •ë³´ ì¶”ì¶œ
- [ ] ë‚ ì§œ (ê³„ì•½ì¼, ë§Œê¸°ì¼ ë“±)
- [ ] ê¸ˆì•¡ (ê³„ì•½ê¸ˆ, ì›”ì„¸ ë“±)
- [ ] ë‹¹ì‚¬ì ì •ë³´
- [ ] ê¸°ê°„ ì •ë³´
- [ ] êµ¬ì¡°í™” ì €ì¥

### 2C.3 ìë™ íƒœê·¸
- [ ] ë‚´ìš© ê¸°ë°˜ íƒœê·¸
- [ ] ê¸ˆì•¡/ë‚ ì§œ ë©”íƒ€ íƒœê·¸
- [ ] ê¸°ì¡´ íƒœê·¸ ì—°ê²°

### 2C.4 AI ëª¨ë¸ ì„¤ì •
- [ ] ëª¨ë¸ ì„ íƒ UI
- [ ] ì‘ì—…ë³„ ëª¨ë¸ ë¶„ë¦¬ (OCR í›„ì²˜ë¦¬, ë¶„ë¥˜, ìš”ì•½, ì¤‘ìš” ë¬¸ì„œ)

---

## ğŸ“‹ Phase 2D: ë¬¸ì„œ ê´€ë¦¬ (ë³´ë¥˜)

### 2D.1 ìˆ˜ì • API
- [ ] POST /api/files/:id/tags
- [ ] POST /api/files/:id/category
- [ ] PATCH /api/files/:id/metadata

### 2D.2 ì¬ë¶„ë¥˜
- [ ] POST /api/files/:id/reclassify
- [ ] ìˆ˜ë™ íŠ¸ë¦¬ê±°
- [ ] ì¼ê´„ ì¬ë¶„ë¥˜

### 2D.3 íƒœê·¸ ê´€ë¦¬
- [ ] POST /api/tags/merge
- [ ] POST /api/tags/split
- [ ] UI íƒœê·¸ ê´€ë¦¬ íŒ¨ë„

---

## ğŸ”§ Phase 2E: ë¬¸ì„œ í™œìš© (ë³´ë¥˜)

### 2E.1 ìŠ¤ì¼€ì¤„ ì¶”ì¶œ
- [ ] "ë§Œê¸°ë˜ëŠ” ë³´í—˜ ì°¾ì•„ì¤˜"
- [ ] ìë™ ë§Œê¸°ì¼ ì¶”ì¶œ
- [ ] ìº˜ë¦°ë” í†µí•©

### 2E.2 ê¸ˆì•¡ ì§‘ê³„
- [ ] ê¸°ê°„ë³„/ì¹´í…Œê³ ë¦¬ë³„ í•©ì‚°
- [ ] ì°¨íŠ¸ ìƒì„±

### 2E.3 íŒŒì¼ í¸ì§‘
- [ ] ì½ê¸°: ëª¨ë“  í¬ë§· â†’ í…ìŠ¤íŠ¸
- [ ] ìˆ˜ì •: í…ìŠ¤íŠ¸ í¸ì§‘ â†’ ì¬ì €ì¥
- [ ] ìƒì„±: í…ìŠ¤íŠ¸ â†’ PDF/Excel/Word
- [ ] ë³€í™˜: í¬ë§· ê°„ ë³€í™˜

---

## ğŸ” Phase 3: ê²€ìƒ‰ ì‹œìŠ¤í…œ âœ…

### 3.1 ê¸°ë³¸ ê²€ìƒ‰
- [x] GET /api/search
- [x] í‚¤ì›Œë“œ ë§¤ì¹­
- [x] ë‚ ì§œ/íƒœê·¸/íŒŒì¼ ìœ í˜• í•„í„°
- [x] í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬, ê´€ë ¨ì„± ì ìˆ˜

### 3.2 ì§€ëŠ¥í˜• ê²€ìƒ‰
- [x] "ê°œë–¡ê°™ì´" ê²€ìƒ‰ì–´ í•´ì„
- [x] ì‹œê°„ ì¶”ë¡  ("ì €ë²ˆì—", "ìµœê·¼", "3ì¼ ì „")
- [x] ë§¥ë½ ê¸°ë°˜ ê²€ìƒ‰
- [x] ê´€ë ¨ì„± ìˆœìœ„
- [x] ì˜¤íƒ€ ìˆ˜ì • & ë™ì˜ì–´ í™•ì¥

### 3.3 ì „ë¬¸ ê²€ìƒ‰ (ë³´ë¥˜)
- [ ] Elasticsearch/MeiliSearch ì—°ë™
- [ ] OCR í…ìŠ¤íŠ¸ í¬í•¨
- [ ] ê¸ˆì•¡/ë‚ ì§œ ë²”ìœ„ ê²€ìƒ‰

### 3.4 ì—°ê´€ ê²€ìƒ‰
- [x] ë¹„ìŠ·í•œ ì£¼ì œ ì°¾ê¸°
- [x] ê´€ê³„ ê·¸ë˜í”„
- [x] "ì´ê²ƒë„ ë³¼ë˜?" ì¶”ì²œ

---

## ğŸ§  Phase 4: ììœ¨ ê¸°ì–µ âœ…

### 4.1 ë§¥ë½ ê°ì§€
- [x] ê´€ë ¨ ì£¼ì œ ìë™ ê°ì§€
- [x] íŠ¸ë¦¬ê±° ì¡°ê±´ ì„¤ì •
- [x] ìë™ ê²€ìƒ‰ ì‹¤í–‰
- [x] ìŠ¤íŒ¸ ë°©ì§€

### 4.2 ìì—°ìŠ¤ëŸ¬ìš´ í†µí•©
- [x] ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì£¼ì…
- [x] "ê·¸ë•Œ ì• ê¸°í–ˆë˜..." íŒ¨í„´
- [x] ìŠ¤íŒ¸ ë°©ì§€

### 4.3 ë¹„ìœ /ì—°ê²°
- [x] ê³¼ê±° ëŒ€í™” ë¹„ìœ  ì°¾ê¸°
- [x] ì„ íƒì  í™œì„±í™”
- [x] ë¬¸ì œ/í•´ê²°/ê²°ê³¼ íŒ¨í„´ ê°ì§€

---

## ğŸ›ï¸ Phase 5: ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ âœ…

### 5.1 í† í° ëª¨ë‹ˆí„°ë§
- [x] í˜„ì¬ í† í° ìˆ˜ ì¶”ì 
- [x] 80% ê²½ê³ , 90% ìë™ ì••ì¶•
- [ ] UI ê²Œì´ì§€ (ì„ íƒ)

### 5.2 ìë™ ì••ì¶•
- [x] ì˜¤ë˜ëœ ë©”ì‹œì§€ ìš”ì•½
- [x] í•µì‹¬ë§Œ ë‚¨ê¸°ê¸°
- [x] ì›ë³¸ íŒŒì¼ ì €ì¥
- [x] AI ìš”ì•½ ì§€ì› (ì„ íƒ)

### 5.3 ì„¸ì…˜ ì—°ì†ì„±
- [x] ì¢…ë£Œ ì‹œ ìš”ì•½ ìƒì„±
- [x] ì‹œì‘ ì‹œ ìš”ì•½ ë¡œë“œ
- [ ] "ì´ì–´ê°€ê¸°" ë²„íŠ¼ (UI)

---

## ğŸ›ï¸ Phase 5.4: ì˜ì†ì  ëŒ€í™”ë°© ì‹œìŠ¤í…œ âœ…

### 5.4.1 ëŒ€í™” ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
- [x] buildConversationMessages() - ë©”ì‹œì§€ ë°°ì—´ êµ¬ì„±
- [x] getMessagesWithinTokenLimit() - ì—­ìˆœ ë©”ì‹œì§€ ì¶”ê°€
- [x] handleResponse() - ì‘ë‹µ ì²˜ë¦¬ ë° ì €ì¥
- [x] ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë™ì  êµ¬ì„±
- [x] ìë™ ë©”ëª¨ë¦¬ ì£¼ì…
- [x] 80% ë„ë‹¬ì‹œ ìë™ ì••ì¶•

### 5.4.2 í† í° í­ë°œ ë°©ì§€
- [x] TokenSafeguard í´ë˜ìŠ¤ - ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [x] emergencyCompress() - 95% ê°•ì œ ì••ì¶•
- [x] truncateToolOutput() - Tool ì¶œë ¥ 500 í† í° ì œí•œ
- [x] Vision í† í° ê³„ì‚°
- [x] ManagedTokenizer - 5ë¶„/25íšŒ ìë™ ì´ˆê¸°í™”
- [x] ë‹¨ì¼ ë©”ì‹œì§€ 10% ì œí•œ

### 5.4.3 ì—ì´ì „íŠ¸ ì²´ì´ë‹
- [x] Agent í´ë˜ìŠ¤
- [x] SequentialChain - ìˆœì°¨ ì‹¤í–‰
- [x] ParallelChain - ë³‘ë ¬ ì‹¤í–‰
- [x] ToolLayer

### 5.4.4 ë©”ëª¨ë¦¬ ê³„ì¸µ
- [x] ShortTermMemory - ìµœê·¼ 50ê°œ ë©”ì‹œì§€
- [x] MiddleTermMemory - ì„¸ì…˜ ìš”ì•½ (íŒŒì¼)
- [x] LongTermMemory - ì•„ì¹´ì´ë¸Œ (MongoDB)
- [x] MemoryManager - í†µí•© ê´€ë¦¬
- [x] ìë™ ê³„ì¸µ ì´ë™

### 5.4.5 ì„¸ì…˜ ì—°ì†ì„±
- [x] saveSessionState() - ì„¸ì…˜ ìƒíƒœ ì €ì¥
- [x] restoreSession() - ì„¸ì…˜ ë³µì›
- [x] generateResumePrompt() - ì¬ê°œ í”„ë¡¬í”„íŠ¸
- [x] ì‹œê°„ ì¸ì§€ ì¬ê°œ ë©”ì‹œì§€
- [x] ìë™ ì €ì¥ (1ë¶„ ê°„ê²©)
- [x] ì„¸ì…˜ ë§Œë£Œ ê´€ë¦¬ (30ì¼)

---

## ğŸ·ï¸ Phase 6: íƒœê·¸ ì§„í™” (ë³´ë¥˜)

### 6.1 íƒœê·¸ ë¶„ì„
- [ ] ì£¼ 1íšŒ ì „ì²´ ë¶„ì„
- [ ] ìœ ì‚¬ íƒœê·¸ ê°ì§€
- [ ] ì‚¬ìš© ë¹ˆë„ ì¶”ì 

### 6.2 ìë™ ì¬ë¶„ë¥˜
- [ ] AI ì •ë¦¬ ìš”ì²­
- [ ] ë³‘í•© ì œì•ˆ
- [ ] ì„¸ë¶„í™” ì œì•ˆ

### 6.3 ê´€ê³„ ì—…ë°ì´íŠ¸
- [ ] ëŒ€í™” ê°„ ê´€ê³„ ì¬ê³„ì‚°
- [ ] íŒ¨í„´ ë°œê²¬
- [ ] index.json ì—…ë°ì´íŠ¸

---

## âš¡ Phase 7: í”„ë¡¬í”„íŠ¸ ìºì‹± (ë³´ë¥˜)

- [ ] DB ìŠ¤í‚¤ë§ˆ: PromptCacheUsage
- [ ] ìë™ ì €ì¥: recordTokenUsage()
- [ ] Stats API: GET /api/prompt-caching/stats
- [ ] ê¸°ë³¸ê°’ í™œì„±í™”

---

## ğŸ¯ Phase 8: ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ… âœ…

### 8.1 ìŠ¤ë§ˆíŠ¸ ë¼ìš°í„°
- [x] SmartRouter í´ë˜ìŠ¤
- [x] analyzeTask() - ë³µì¡ë„ ë¶„ì„ (0-10)
- [x] detectTaskType() - 11ê°œ íƒœìŠ¤í¬ ìœ í˜• íƒì§€
- [x] selectModel() - Haiku/Sonnet/Opus ìë™ ì„ íƒ
- [x] ë¹„ìš© ì¶”ì •
- [x] ë¼ìš°íŒ… í†µê³„

### 8.2 ë‹¨ì¼ ì¸ê²© ì‹œìŠ¤í…œ
- [x] PersonalityCore í´ë˜ìŠ¤
- [x] PERSONALITY_PROFILE (ì¸ê²© ì •ì˜)
- [x] generateSystemPrompt() - ì¼ê´€ëœ í”„ë¡¬í”„íŠ¸
- [x] validateResponse() - ì‘ë‹µ ì¼ê´€ì„± ê²€ì¦
- [x] handleModelSwitch() - ëª¨ë¸ ì „í™˜ ì‹œ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
- [x] trackTopic() - ëŒ€í™” ì£¼ì œ ì¶”ì 
- [x] setUserPreference() - ì‚¬ìš©ì ì„ í˜¸ë„

### 8.3 API & í…ŒìŠ¤íŠ¸
- [x] POST /api/chat - ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ… í†µí•©
- [x] POST /api/chat/analyze-task
- [x] GET /api/chat/routing-stats
- [x] GET /api/chat/models, personality
- [x] POST /api/chat/personality/preference
- [x] í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] SMART_ROUTING.md ë¬¸ì„œí™”

---

## ğŸ¨ Phase 9: UI ê°œì„ 

### 9.1 ë©”ëª¨ë¦¬ íƒìƒ‰
- [ ] íƒ€ì„ë¼ì¸ ë·°
- [ ] íƒœê·¸ í´ë¼ìš°ë“œ
- [ ] ê´€ê³„ ê·¸ë˜í”„ ì‹œê°í™”

### 9.2 ê²€ìƒ‰ UI âœ… (2026-01-24)
- [x] ê²€ìƒ‰ì°½ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì—°ê²°
- [x] SearchManager í´ë˜ìŠ¤ êµ¬í˜„ (`/client/src/utils/search-manager.js`)
- [x] ê²€ìƒ‰ ê²°ê³¼ ë“œë¡­ë‹¤ìš´ UI (`/client/src/styles/main.css`)
- [x] ë””ë°”ìš´ìŠ¤ ê²€ìƒ‰ (300ms)
- [x] Smart Search API ì—°ë™ (`/api/search/smart`)
- [x] ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŠ¸
- [x] ê²€ìƒ‰ ê²°ê³¼ í´ë¦­ ì‹œ Canvas íŒ¨ë„ì— ìƒì„¸ í‘œì‹œ
- [ ] í•„í„° ì˜µì…˜ (ë‚ ì§œ, íƒœê·¸, ì¹´í…Œê³ ë¦¬) - ë³´ë¥˜
- [ ] "ë¶ˆëŸ¬ì˜¤ê¸°" ë²„íŠ¼ (ëŒ€í™” ë¡œë“œ) - ë³´ë¥˜

### 9.3 íŒŒì¼ ê´€ë¦¬ UI
- [ ] íŒŒì¼ ëª©ë¡ ë·°
- [ ] ë¶„ë¥˜ë³„ í•„í„°
- [ ] í¸ì§‘ ì¸í„°í˜ì´ìŠ¤
- [ ] íƒœê·¸ ê´€ë¦¬

### 9.4 MCP UI
- [ ] MCP ì„œë²„ ëª©ë¡
- [ ] ìƒì„¸ ì •ë³´
- [ ] ì¶”ê°€/í¸ì§‘/ì‚­ì œ
- [ ] í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€
- [ ] ëŒ€í™”ì°½ MCP ë²„íŠ¼ ì—°ë™

### 9.5 ì•Œë¦¼ ì„¼í„°
- [ ] ì•Œë¦¼ ëª©ë¡ (NotificationCenter)
- [ ] ìš°ì„ ìˆœìœ„ í‘œì‹œ
- [ ] ì½ìŒ/ë¯¸ì½ìŒ
- [ ] íƒ€ì…ë³„ í•„í„°
- [ ] NotificationBadge
- [ ] ì‹¤ì‹œê°„ í´ë§ (30ì´ˆ)

### 9.6 ì»¨í…ìŠ¤íŠ¸ UI
- [ ] í† í° ê²Œì´ì§€ (ì„ íƒ)

### 9.7 ë‹¨ì¼ ëŒ€í™”ë°© ì‹œìŠ¤í…œ

#### 9.7.1 UI ì •ë¦¬
- [x] Nav.tsx ê°„ì†Œí™”
- [x] ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ ì œê±°
- [x] ìƒˆ ëŒ€í™” ë²„íŠ¼ ì œê±° (ì¢Œì¸¡ Nav)
- [x] ì—ì´ì „íŠ¸ ë§ˆì¼“ ì œê±°
- [x] ê²€ìƒ‰ë°” ì œê±°
- [x] ë¶ë§ˆí¬ ì œê±°
- [x] ìƒˆ ëŒ€í™” ë²„íŠ¼ ì œê±° (ìš°ì¸¡ ìƒë‹¨) â­
- [x] ëŒ€í™”ë°© ì œëª© ì œê±° ("New Chat" ë“±) â­
- [x] Header ìƒë‹¨ ë– ìˆëŠ” UI ì „ë¶€ ì œê±° â­
- [x] í–„ë²„ê±° ë²„íŠ¼ë§Œ ë‚¨ê¸°ê¸° (ì•Œë¦¼/ì‚¬ìš©ì/ì„¤ì • ì œê±°)

#### 9.7.2 ë¼ìš°íŒ…
- [x] ChatRoute.tsx: ê³ ì • 'main-conversation'
- [x] routes/index.tsx: index: true
- [x] useNewConvo.ts: navigate('/')
- [x] URL: `/` ë§Œ ì‚¬ìš©

#### 9.7.3 API
- [x] convos.js: GET /:idë§Œ ìœ ì§€
- [x] main-conversation ìë™ ìƒì„±
- [x] ë¶ˆí•„ìš”í•œ ë¼ìš°íŠ¸ ì œê±°
- [x] ì •ì  íŒŒì¼ ì„œë¹™ ì„¤ì • (Express)

#### 9.7.4 ì‘ë™ í™•ì¸
- [x] URL ê¹”ë” (/)
- [x] /c/new ë¦¬ë‹¤ì´ë ‰íŠ¸ í•´ê²°
- [x] Service Worker ê°±ì‹ 
- [x] Header UI ì™„ì „ ì •ë¦¬ â­
- [x] ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  í…ŒìŠ¤íŠ¸ (êµ¬ì¡° í™•ì¸ ì™„ë£Œ)
- [x] ìƒˆë¡œê³ ì¹¨ í›„ ëŒ€í™” ìœ ì§€ í™•ì¸ (loadRecentMessages êµ¬í˜„ ì™„ë£Œ)

#### 9.7.5 ë©”ëª¨ë¦¬ í†µí•©
- [x] ê³ ì • ëŒ€í™”ë°©ì— ë©”ëª¨ë¦¬ ì—°ê²° (conversation-pipeline)
- [x] API ì—°ë™ í™•ì¸ (GET /api/chat/history/:sessionId)
- [x] ë©”ëª¨ë¦¬ ìë™ ì €ì¥ (handleResponse)
- [x] í”„ë¡ íŠ¸ API í´ë¼ì´ì–¸íŠ¸ ì—…ë°ì´íŠ¸ (chat-simple â†’ /api/chat)
- [x] ì»¨í…ìŠ¤íŠ¸ ì••ì¶• ì‹œ ë©”ëª¨ë¦¬ ìœ ì§€ (ì´ë¯¸ êµ¬í˜„ë¨)
- [ ] ë©”ëª¨ë¦¬ ì„¤ì • UI (ë³´ë¥˜)

### 9.9 ì•± ì„¤ì • íƒ­ (í…Œë§ˆ + ë¹„ë°€ í†µí•©)
**ê°œìš”**: ì„¤ì • í˜ì´ì§€ íƒ­ ì¬êµ¬ì„± â†’ [í”„ë¡œí•„] [AI] [ì•± ì„¤ì •]

**ì•± ì„¤ì • íƒ­ ë‚´ìš©**:
- í…Œë§ˆ ì„¤ì • (ê¸°ì¡´ theme-settings.js ë‚´ìš©)
- ë¹„ë°€ ê´€ë¦¬ (API í‚¤/í† í° ìƒíƒœ + ë©”ëª¨)

**ì €ì¥ ìœ„ì¹˜ëŠ” ê·¸ëŒ€ë¡œ** (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€):
- AI ì„œë¹„ìŠ¤ API í‚¤ â†’ MongoDB `aiservices` ì»¬ë ‰ì…˜
- MCP ì„œë²„ í† í° â†’ MCP ì„¤ì • íŒŒì¼
- ê¸°íƒ€ ì¸ì¦ ì •ë³´ â†’ ê°ì ìœ„ì¹˜

**ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥**:
- [ ] ë¹„ë°€ ê´€ë¦¬ í˜ì´ì§€ (ë³´ê¸° ì „ìš©)
  - [ ] ì„¤ì •ëœ ìê²© ì¦ëª… ëª©ë¡ í‘œì‹œ
  - [ ] ìƒíƒœ í‘œì‹œ: âœ… ì„¤ì •ë¨ / âŒ ì—†ìŒ
  - [ ] [í¸ì§‘] ë§í¬ â†’ í•´ë‹¹ ì„¤ì • í˜ì´ì§€ë¡œ ì´ë™
- [ ] ì„¹ì…˜ë³„ ê·¸ë£¹í™”
  - [ ] AI Services (Anthropic, OpenAI, Google, Ollama...)
  - [ ] MCP Servers (ì—°ê²°ëœ MCP ëª©ë¡)
  - [ ] ê¸°íƒ€ (ì¶”í›„ í™•ì¥)
- [ ] ë³´ì•ˆ
  - [ ] API í‚¤ ê°’ì€ í‘œì‹œ ì•ˆ í•¨ (ë§ˆìŠ¤í‚¹ ë˜ëŠ” ìƒíƒœë§Œ)
  - [ ] "ì„¤ì •ë¨/ì—†ìŒ" ìƒíƒœë§Œ í‘œì‹œ
- [ ] ë©”ëª¨ë€ (ë¯¸ì‚¬ìš© í‚¤/í† í° ì„ì‹œ ì €ì¥)
  - [ ] ììœ  í…ìŠ¤íŠ¸ ë©”ëª¨ ì¶”ê°€ ê¸°ëŠ¥
  - [ ] ì˜ˆ: "ë‚˜ì¤‘ì— MCP ë¶™ì¼ ë•Œ ë„£ì„ Git í† í°: xxxxx"
  - [ ] ì•”í˜¸í™” ì €ì¥ (MongoDB)
  - [ ] ë³µì‚¬ ë²„íŠ¼

**UI êµ¬ì¡° ì˜ˆì‹œ**:
```
ì„¤ì • íƒ­: [í”„ë¡œí•„] [AI] [ì•± ì„¤ì •]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ ì•± ì„¤ì •                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¨ í…Œë§ˆ                             â”‚
â”‚  â”œâ”€â”€ ë‹¤í¬ ëª¨ë“œ / ë¼ì´íŠ¸ ëª¨ë“œ         â”‚
â”‚  â””â”€â”€ ìƒ‰ìƒ í…Œë§ˆ ì„ íƒ                  â”‚
â”‚                                     â”‚
â”‚  ğŸ” ë¹„ë°€ ê´€ë¦¬                        â”‚
â”‚  â”œâ”€â”€ AI Services                    â”‚
â”‚  â”‚   â”œâ”€â”€ Anthropic  âœ… ì„¤ì •ë¨ [í¸ì§‘]â”‚
â”‚  â”‚   â”œâ”€â”€ OpenAI     âŒ ì—†ìŒ   [ì„¤ì •]â”‚
â”‚  â”‚   â””â”€â”€ Ollama     âœ… í™œì„±í™” [í¸ì§‘]â”‚
â”‚  â”œâ”€â”€ MCP Servers                    â”‚
â”‚  â”‚   â”œâ”€â”€ GitHub     âœ… ì—°ê²°ë¨ [í¸ì§‘]â”‚
â”‚  â”‚   â””â”€â”€ Notion     âŒ ë¯¸ì—°ê²° [ì„¤ì •]â”‚
â”‚  â””â”€â”€ ğŸ“ ë©”ëª¨ (ë¯¸ì‚¬ìš© í‚¤/í† í°)        â”‚
â”‚      â”œâ”€â”€ Git í† í°: ghp_xxx...  [ğŸ“‹] â”‚
â”‚      â””â”€â”€ [+ ë©”ëª¨ ì¶”ê°€]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬í˜„ íŒŒì¼**:
- [ ] `/client/src/settings/components/app-settings.js` - ì•± ì„¤ì • ì»´í¬ë„ŒíŠ¸ (í…Œë§ˆ + ë¹„ë°€)
- [ ] `/soul/routes/secrets.js` - ìƒíƒœ ì¡°íšŒ API (GET /api/secrets/status)
- [ ] `/soul/models/SecretMemo.js` - ë©”ëª¨ ì €ì¥ ëª¨ë¸ (ì•”í˜¸í™”)
- [ ] `theme-settings.js` â†’ `app-settings.js`ë¡œ í†µí•©
- [ ] SettingsManager íƒ­ ì¬êµ¬ì„±

---

### 9.8 í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë“ˆí™” âœ… (2026-01-22)

#### 9.8.1 ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„± âœ…
- [x] `src/styles/core/` - ë³€ìˆ˜, ë¦¬ì…‹, ë ˆì´ì•„ì›ƒ
- [x] `src/styles/components/` - ì»´í¬ë„ŒíŠ¸ë³„ CSS
- [x] `src/styles/pages/` - í˜ì´ì§€ë³„ CSS
- [x] `src/components/` - JS ì»´í¬ë„ŒíŠ¸ (chat, sidebar, canvas, shared)
- [x] `src/pages/` - í˜ì´ì§€ë³„ JS (ì¶”í›„ ì‚¬ìš©)

#### 9.8.2 CSS ëª¨ë“ˆ ë¶„ë¦¬ âœ…
- [x] `core/variables.css` - CSS ë³€ìˆ˜, í°íŠ¸, ìƒ‰ìƒ
- [x] `core/reset.css` - ë¦¬ì…‹, body ê¸°ë³¸ ìŠ¤íƒ€ì¼
- [x] `core/layout.css` - container, ë ˆì´ì•„ì›ƒ êµ¬ì¡°
- [x] `components/card.css` - ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼
- [x] `components/sidebar.css` - ì‚¬ì´ë“œë°” (left-card, center-card)
- [x] `components/chat.css` - ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­
- [x] `components/canvas.css` - ìº”ë²„ìŠ¤ íŒ¨ë„
- [x] `components/forms.css` - ì…ë ¥ì°½, ë²„íŠ¼, ì•¡ì…˜ë°”
- [x] `components/dock.css` - MacOS ìŠ¤íƒ€ì¼ ë…
- [x] `pages/chat-page.css` - ì±„íŒ… í˜ì´ì§€ ë ˆì´ì•„ì›ƒ

#### 9.8.3 JS ì»´í¬ë„ŒíŠ¸ ì¬êµ¬ì¡°í™” âœ…
**ì´ë™ëœ íŒŒì¼**:
- [x] `utils/chat-manager.js` â†’ `components/chat/chat-manager.js`
- [x] `utils/menu-manager.js` â†’ `components/sidebar/menu-manager.js`
- [x] `utils/panel-manager.js` â†’ `components/shared/panel-manager.js`

**import ê²½ë¡œ ìˆ˜ì •**:
- [x] `src/main.js` - ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ ê²½ë¡œë¡œ ì—…ë°ì´íŠ¸
- [x] `components/shared/panel-manager.js` - profile-manager ê²½ë¡œ ìˆ˜ì •
- [x] `components/sidebar/menu-manager.js` - ai-service-manager ê²½ë¡œ ìˆ˜ì •

#### 9.8.4 ë¹Œë“œ í…ŒìŠ¤íŠ¸ âœ…
- [x] `npm run build` ì„±ê³µ (558ms)
- [x] ëª¨ë“  ëª¨ë“ˆ ì •ìƒ ë¡œë”©
- [x] ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€ í™•ì¸

#### 9.8.5 ë¬¸ì„œí™” âœ…
- [x] README.md ì—…ë°ì´íŠ¸ - ëª¨ë“ˆí™”ëœ êµ¬ì¡° ë¬¸ì„œí™”
- [x] ëª¨ë“ˆ ì‚¬ìš© ê°€ì´ë“œ ì‘ì„±
- [x] ë””ë ‰í† ë¦¬ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ ì¶”ê°€

**ì•„í‚¤í…ì²˜ ê°œì„ **:
```
Before (Monolithic):
src/
â”œâ”€â”€ styles/main.css (2243 lines)
â””â”€â”€ utils/*.js (ëª¨ë“  ë¡œì§ í˜¼ì¬)

After (Modular):
src/
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ core/           # ê¸°ë³¸ ìŠ¤íƒ€ì¼
â”‚   â”œâ”€â”€ components/     # ì»´í¬ë„ŒíŠ¸ë³„
â”‚   â””â”€â”€ pages/          # í˜ì´ì§€ë³„
â”œâ”€â”€ components/         # ê¸°ëŠ¥ë³„ JS
â”‚   â”œâ”€â”€ chat/
â”‚   â”œâ”€â”€ sidebar/
â”‚   â”œâ”€â”€ canvas/
â”‚   â””â”€â”€ shared/
â””â”€â”€ utils/              # ìˆœìˆ˜ ìœ í‹¸ë¦¬í‹°
```

**ì£¼ìš” ì¥ì **:
- âœ… ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬
- âœ… ì»´í¬ë„ŒíŠ¸ ë…ë¦½ì„± í–¥ìƒ
- âœ… ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ 
- âœ… ì¶”í›„ í˜ì´ì§€ ë¶„ë¦¬ ì¤€ë¹„ ì™„ë£Œ
- âœ… íŒ€ í˜‘ì—… ìš©ì´ (íŒŒì¼ ì¶©ëŒ ìµœì†Œí™”)

---

## ğŸš€ Phase 10: ë°°í¬ & ìµœì í™” (ë³´ë¥˜)

### 10.1 ì„±ëŠ¥
- [ ] ê²€ìƒ‰ ì¸ë±ì‹± ìµœì í™”
- [ ] ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬
- [ ] ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… í

### 10.2 ë°±ì—…
- [ ] ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸
- [ ] ì™¸ë¶€ ë™ê¸°í™”
- [ ] ë³µêµ¬ í…ŒìŠ¤íŠ¸

### 10.3 ëª¨ë‹ˆí„°ë§
- [ ] ì €ì¥ ì‹¤íŒ¨ ì•Œë¦¼
- [ ] ë¹„ìš© ì¶”ì 
- [ ] ì„±ëŠ¥ ë©”íŠ¸ë¦­

---

## ğŸŒ Phase 11: ë„¤íŠ¸ì›Œí¬ (ë³´ë¥˜)

### 11.1 ë‚´ë¶€ ë„ë©”ì¸
- [ ] DNS/hosts ì„¤ì •
- [ ] ìë™ ê°ì§€
- [ ] Reverse Proxy

### 11.2 ì™¸ë¶€ ì ‘ì†
- [ ] ë„ë©”ì¸ ê´€ë¦¬ UI
- [ ] DDNS ì—°ë™
- [ ] ìì²´ ë„ë©”ì¸ ì„¤ì •
- [ ] SSL ìë™ ê°±ì‹ 

### 11.3 ë¼ìš°íŒ…
- [ ] ë‚´ë¶€ë§/ì™¸ë¶€ë§ ê°ì§€
- [ ] ìµœì  ê²½ë¡œ ì„ íƒ
- [ ] VPN/Tailscale í†µí•©

---

---

## ğŸ“ Phase P ì‘ì—… ì™„ë£Œ ë©”ëª¨ (2026-01-22)

### ì£¼ìš” êµ¬í˜„ ë‚´ìš©

#### 1. Profile ëª¨ë¸ êµ¬í˜„ âœ…
- [x] `/soul/models/Profile.js` ìƒì„±
- [x] basicInfo ê³ ì • í•„ë“œ (ì´ë¦„, ë‹‰ë„¤ì„, ìœ„ì¹˜, íƒ€ì„ì¡´ ë“±)
- [x] customFields[] ë™ì  í•„ë“œ (text, number, date, tag, list, url, select)
- [x] permissions ê¶Œí•œ ì œì–´ (readScope, canWrite, canDelete, autoIncludeInContext)
- [x] í•„ë“œ ê´€ë¦¬ ë©”ì„œë“œ (addField, updateField, deleteField, reorderFields)
- [x] ìš”ì•½ ìƒì„± ë©”ì„œë“œ (generateSummary, findFieldsByKeywords)

#### 2. API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ âœ…
- [x] `/soul/routes/profile.js` Phase P API ì¶”ê°€
- [x] í”„ë¡œí•„ CRUD: GET/POST/PUT/DELETE /api/profile/p/*
- [x] í•„ë“œ ê´€ë¦¬: POST/PUT/DELETE /api/profile/p/fields/*
- [x] ê¶Œí•œ ê´€ë¦¬: GET/PATCH /api/profile/p/permissions
- [x] í‚¤ì›Œë“œ ê²€ìƒ‰: GET /api/profile/p/summary?keywords=...

#### 3. í”„ë¡ íŠ¸ì—”ë“œ UI êµ¬í˜„ âœ…
- [x] `/client/src/utils/profile-manager.js` ProfileManager í´ë˜ìŠ¤
- [x] `/client/src/styles/profile-manager.css` í”„ë¡œí•„ ìŠ¤íƒ€ì¼
- [x] Inline í¸ì§‘ ê¸°ëŠ¥
- [x] ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì •ë ¬
- [x] ì‹¤ì‹œê°„ ìë™ ì €ì¥
- [x] `/client/src/utils/panel-manager.js` í”„ë¡œí•„ íŒ¨ë„ í†µí•©
- [x] `/client/src/utils/menu-manager.js` í”„ë¡œí•„ ë©”ë‰´ í†µí•©
- [x] `/client/src/main.js` í”„ë¡œí•„ ë²„íŠ¼ ë² ì´ì§€ ë ˆì´ì–´ ì—°ê²°

#### 4. ì†Œìš¸ AI í†µí•© âœ…
- [x] `/soul/utils/conversation-pipeline.js` í”„ë¡œí•„ í†µí•©
  - [x] _buildSystemPromptWithProfile() - ëŒ€í™” ì‹œì‘ ì‹œ í”„ë¡œí•„ ìë™ ì£¼ì…
  - [x] _buildProfileFieldsPrompt() - í‚¤ì›Œë“œ ê¸°ë°˜ ìƒì„¸ ì •ë³´ ì£¼ì…
- [x] `/soul/utils/context-detector.js` ê°œì¸ í‚¤ì›Œë“œ ê°ì§€
  - [x] ê°œì¸ ì •ë³´ ê´€ë ¨ í‚¤ì›Œë“œ ê°ì§€ ì‹œ ìƒì„¸ í•„ë“œ ë¡œë“œ

#### 5. í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± âœ…
- [x] `/scripts/test-profile-api.sh` ìƒì„±
- [x] 8ê°œ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- [x] ê¶Œí•œ ì²´í¬ ë¡œì§ ê²€ì¦
- [x] UI ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸

### í•µì‹¬ ê¸°ëŠ¥
- [x] ì‚¬ìš©ì í”„ë¡œí•„ ë™ì  ê´€ë¦¬ (í•„ë“œ ììœ  ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ)
- [x] ì†Œìš¸ ì ‘ê·¼ ê¶Œí•œ ì„¸ë°€ ì œì–´ (full/limited/minimal)
- [x] ëŒ€í™” ì‹œ ìë™ ì»¨í…ìŠ¤íŠ¸ í¬í•¨
- [x] í‚¤ì›Œë“œ ê°ì§€ ì‹œ ê´€ë ¨ í•„ë“œ ìë™ ë¡œë“œ
- [x] Inline í¸ì§‘ & ë“œë˜ê·¸ ì•¤ ë“œë¡­ UI

### ì•„í‚¤í…ì²˜ íë¦„
```
ì‚¬ìš©ì ëŒ€í™”
    â†“
context-detector.js (ê°œì¸ í‚¤ì›Œë“œ ê°ì§€)
    â†“
conversation-pipeline.js (í”„ë¡œí•„ ìš”ì•½ ì£¼ì…)
    â†“
Profile.generateSummary() (ê¶Œí•œ ê¸°ë°˜ ìš”ì•½)
    â†“
ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìë™ êµ¬ì„±
```

### 2026-01-22 ì¶”ê°€ ì‘ì—…

#### ì„¤ì • í˜ì´ì§€ í”„ë ˆì„ì›Œí¬ ë¦¬íŒ©í† ë§ âœ…
- [x] ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ì „ë©´ ì¬êµ¬ì„±
  - [x] `settings/settings-manager.js` ë©”ì¸ í”„ë ˆì„ì›Œí¬ (ë¼ìš°íŒ…, ë„¤ë¹„ê²Œì´ì…˜)
  - [x] `settings/components/` ê° ì„¤ì • í˜ì´ì§€ ë…ë¦½ ì»´í¬ë„ŒíŠ¸
    - [x] `profile-settings.js` í”„ë¡œí•„ ì„¤ì •
    - [x] `ai-settings.js` AI ì„¤ì • (í”Œë ˆì´ìŠ¤í™€ë”)
    - [x] `theme-settings.js` í…Œë§ˆ ì„¤ì • (í”Œë ˆì´ìŠ¤í™€ë”)
  - [x] `settings/styles/settings.css` ê³µí†µ ìŠ¤íƒ€ì¼

- [x] ë™ì  ëª¨ë“ˆ ë¡œë”©
  - [x] í•„ìš”í•  ë•Œë§Œ ë™ì  ë¡œë“œ (`import()`)
  - [x] ì»´í¬ë„ŒíŠ¸ ìºì‹±ìœ¼ë¡œ ì¬ì‚¬ìš© íš¨ìœ¨ì„± ì¦ëŒ€
  - [x] CSSëŠ” main.cssì—ì„œ import (Vite HMR)

- [x] íƒ­ ë„¤ë¹„ê²Œì´ì…˜
  - [x] í”„ë¡œí•„, AI ì„¤ì •, í…Œë§ˆ ì„¤ì • ê°„ ì „í™˜
  - [x] í™œì„± ìƒíƒœ í‘œì‹œ ë° ë¶€ë“œëŸ¬ìš´ ì „í™˜

#### í”„ë¡œí•„ ì„¤ì • ê¸°ëŠ¥ âœ…
- [x] ê¸°ë³¸ ì •ë³´ í•„ë“œ (ì‹¤ìš©ì ì¸ ê°œì¸ì •ë³´)
  - [x] ì´ë¦„, ë‹‰ë„¤ì„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, ìƒë…„ì›”ì¼
  - [x] ì„±ë³„, ì£¼ë¯¼ë²ˆí˜¸(ë¯¼ê°ì •ë³´), êµ­ê°€, ì£¼ì†Œ
  - [x] íƒ€ì„ì¡´, ì–¸ì–´ (ì‹œìŠ¤í…œìš©)
- [x] ê° í•„ë“œ ê°œë³„ ê³µê°œ ì„¤ì • í† ê¸€
  - [x] ğŸ‘ï¸/ğŸ”’ ì†Œìš¸ì—ê²Œ ê³µê°œ ì—¬ë¶€
  - [x] ğŸ”„/â¸ï¸ ìë™ ì»¨í…ìŠ¤íŠ¸ í¬í•¨ ì—¬ë¶€
- [x] ë°±ì—”ë“œ API ì—°ë™
  - [x] PUT /api/profile/p/basic/:fieldKey - ê°’ ì—…ë°ì´íŠ¸
  - [x] PUT /api/profile/p/basic/:fieldKey/visibility - ê³µê°œ ì„¤ì • ì—…ë°ì´íŠ¸
- [x] Profile ëª¨ë¸ ìŠ¤í‚¤ë§ˆ
  - [x] basicInfo ê° í•„ë“œë§ˆë‹¤ { value, visibility } êµ¬ì¡°
  - [x] fieldVisibilitySchema ì§€ì›

---

### Phase P: í”„ë¡œí•„ ì‹œìŠ¤í…œ âœ…

#### P.1 ë°ì´í„° ëª¨ë¸ âœ…
- [x] MongoDB ìŠ¤í‚¤ë§ˆ ì„¤ê³„
  - [x] basicInfo (ê³ ì • í•„ë“œ)
  - [x] customFields[] (ë™ì  í•„ë“œ)
  - [x] permissions (ê¶Œí•œ ì„¤ì •)
  - [x] metadata (ìƒì„±ì¼, ìˆ˜ì •ì¼ ë“±)
- [x] í•„ë“œ íƒ€ì… ì§€ì›
  - [x] text, number, date, tag, list, url, select
- [x] ê¶Œí•œ ëª¨ë¸
  - [x] owner (ì†Œì›) - read/write all
  - [x] soul - ê¸°ë³¸ read only (ê¶Œí•œ ì„¤ì •ì— ì“°ê¸°,ì‚­ì œ ê°€ëŠ¥)
  - [x] scope: full / limited / minimal

#### P.2 ë°±ì—”ë“œ API âœ…
- [x] Profile ëª¨ë¸ & ìŠ¤í‚¤ë§ˆ
- [x] í”„ë¡œí•„ ì¡°íšŒ API
  - [x] GET /api/profile/p - ì „ì²´
  - [x] GET /api/profile/p/summary - ìš”ì•½
  - [x] GET /api/profile/p/detail/:fieldId - ìƒì„¸
- [x] í•„ë“œ CRUD API
  - [x] POST /api/profile/p/fields - í•„ë“œ ì¶”ê°€
  - [x] PUT /api/profile/p/fields/:id - í•„ë“œ ìˆ˜ì •
  - [x] DELETE /api/profile/p/fields/:id - í•„ë“œ ì‚­ì œ
  - [x] PUT /api/profile/p/fields/reorder - ìˆœì„œ ë³€ê²½
- [x] ê¶Œí•œ ê´€ë¦¬ API
  - [x] GET /api/profile/p/permissions - ê¶Œí•œ ì¡°íšŒ
  - [x] PATCH /api/profile/p/permissions - ê¶Œí•œ ìˆ˜ì •
- [ ] WebSocket ì´ë²¤íŠ¸ (ë³´ë¥˜ - HTTPë¡œë„ ì¶©ë¶„)

#### P.3 í”„ë¡ íŠ¸ì—”ë“œ UI âœ…
- [x] í”„ë¡œí•„ íŒ¨ë„ UI
  - [x] í•„ë“œ ëª©ë¡ í‘œì‹œ
  - [x] Inline í¸ì§‘ (í´ë¦­í•´ì„œ ìˆ˜ì •)
  - [x] í•„ë“œ ì¶”ê°€ ë²„íŠ¼
  - [x] í•„ë“œ ì‚­ì œ ë²„íŠ¼ (Ã—)
  - [x] í•„ë“œ ìˆœì„œ ë³€ê²½ (drag)
  - [x] ì €ì¥ ë²„íŠ¼
  - [x] ì €ì¥ ìƒíƒœ í‘œì‹œ

#### P.4 ì†Œìš¸ í†µí•© âœ…
- [x] í”„ë¡œí•„ ìš”ì•½ Context ë¡œë“œ
  - [x] ëŒ€í™” ì‹œì‘ ì‹œ ìš”ì•½ ìë™ í¬í•¨
  - [x] ê°œì¸ ì–˜ê¸° ê°ì§€ ì‹œ ìƒì„¸ í•„ë“œ ë¡œë“œ
- [x] context-detectorì™€ í†µí•©
- [x] ìì—°ìŠ¤ëŸ¬ìš´ ì°¸ì¡°
- [x] ê¶Œí•œ ê²€ì¦ ë¯¸ë“¤ì›¨ì–´

#### P.5 í…ŒìŠ¤íŠ¸ âœ…
- [x] API í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [x] ê¶Œí•œ ì²´í¬ ë¡œì§ êµ¬í˜„
- [x] UI ìƒí˜¸ì‘ìš© êµ¬í˜„
- [x] test-profile-api.sh ì¶”ê°€

---

## ğŸ”„ Phase A: ìë™ ì—…ë°ì´íŠ¸ (ë³´ë¥˜)

### A.1 ë²„ì „ ì²´í¬
- [ ] GitHub Releases API
- [ ] ì„œë²„ ì‹œì‘ ì‹œ ì²´í¬
- [ ] í˜„ì¬ vs ìµœì‹  ë¹„êµ
- [ ] Header ë°°ì§€ (ğŸ†™)

### A.2 ì—…ë°ì´íŠ¸ UI
- [ ] ì•ˆë‚´ ëª¨ë‹¬
- [ ] ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ í‘œì‹œ
- [ ] [ì§€ê¸ˆ ì—…ë°ì´íŠ¸] [ë‚˜ì¤‘ì—] [ë¬´ì‹œ]

### A.3 ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
- [ ] Docker: pull && up -d
- [ ] ì¼ë°˜: git pull && build && restart

### A.4 ì„¤ì •
- [ ] ìë™ í™•ì¸ í™œì„±í™”/ë¹„í™œì„±í™”
- [ ] ì²´í¬ ì£¼ê¸° ì„¤ì •
- [ ] [ì§€ê¸ˆ í™•ì¸] ë²„íŠ¼

### A.5 Tauri ì•±
- [ ] Tauri Updater ì—°ë™

---

## ğŸ”” Phase N: ì•Œë¦¼ ì‹œìŠ¤í…œ (ë³´ë¥˜)

- [ ] ì•Œë¦¼ DB í…Œì´ë¸”
- [ ] ì•Œë¦¼ í ê´€ë¦¬
- [ ] ìƒíƒœ ì¶”ì  (pending/delivered/read)
- [ ] íŠ¸ë¦¬ê±° ì¡°ê±´ (ì‘ì—… ì™„ë£Œ, ì—ëŸ¬, ê²°ì • ë“±)
- [ ] ì „ë‹¬ ë°©ì‹ (ë©”ì‹œì§€ ì§ì ‘ ì „ë‹¬, ì•Œë¦¼ì°½ í‘œì‹œ)
- [ ] ìš°ì„ ìˆœìœ„ ê´€ë¦¬ (1-10)
- [ ] ë§¥ë½ ì¸ì§€
- [ ] ìì—°ì–´ ë©”ì‹œì§€ ìƒì„±

---

## â° Phase T: ì‹œê°„ ì¸ì§€ âœ…

- [x] ëŒ€í™” ì´ë ¥ DB - memory-layers.js (MongoDB)
- [x] í˜„ì¬ ì‹œê°„ ì •ë³´ - conversation-pipeline.js (í”„ë¡œí•„ íƒ€ì„ì¡´ ë°˜ì˜)
- [x] íŒ¨í„´ ë¶„ì„ (ë¹ˆë„, ì‹œê°„ëŒ€) - pattern-analysis.js
- [x] ë§¥ë½ ì—°ì†ì„± - session-continuity.js
- [x] ì‹œê°„ ê¸°ë°˜ ì‘ë‹µ - greeting-system.js
- [x] ì•ˆë¶€ ì‹œìŠ¤í…œ - greeting-system.js (notifications ì—°ë™)
- [x] ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì£¼ì… - conversation-pipeline.js

---

## ğŸ¤– Phase X: AI ëª¨ë¸ ê´€ë¦¬ ì‹œìŠ¤í…œ âœ…

### X.1 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ âœ…
- [x] AIService ëª¨ë¸ ë‹¨ìˆœí™” - apiKey ì§ì ‘ ì €ì¥
- [x] APIKey ì»¬ë ‰ì…˜ ì œê±° (ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ)
- [x] Memory ëª¨ë¸ ìƒì„± - ì¥ê¸° ë©”ëª¨ë¦¬ ì €ì¥ì†Œ
- [x] UserProfile ëª¨ë¸ - í…Œë§ˆ, ì„ í˜¸ë„, í™œë™ ì¶”ì 

### X.2 ë™ì  ëª¨ë¸ ê´€ë¦¬ âœ…
- [x] ì œê³µì‚¬ë³„ API ì—°ë™
- [x] API í‚¤ ê²€ì¦ ì‹œìŠ¤í…œ
- [x] ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
- [x] Claude ëª¨ë¸ ID ìˆ˜ì • (claude-sonnet-4-5-20250929)
- [x] Role ëª¨ë¸ ê¸°ë³¸ê°’ ì—…ë°ì´íŠ¸ (ìµœì‹  ëª¨ë¸ ë°˜ì˜)

### X.3 API í‚¤ ê´€ë¦¬ ë¦¬íŒ©í† ë§ âœ…
- [x] ë³µì¡í•œ ì´ì¤‘ êµ¬ì¡° ì œê±° (AIService + APIKey)
- [x] AIService.apiKey ì§ì ‘ ì €ì¥ (select: falseë¡œ ë³´ì•ˆ ìœ ì§€)
- [x] ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë° ì‹¤í–‰
- [x] API ë¼ìš°íŠ¸ ë‹¨ìˆœí™” (ai-services.js)
- [x] í™˜ê²½ë³€ìˆ˜ëŠ” ì´ˆê¸°í™” ì‹œì—ë§Œ ì‚¬ìš©

### X.4 ì„¤ì • UI âœ…
- [x] í–„ë²„ê±° ë©”ë‰´ "ğŸ¤– AI ì„¤ì •"
- [x] ë™ì  UI ì „í™˜ (AIServiceManager í´ë˜ìŠ¤)
- [x] í…Œì´ë¸” í˜•íƒœ ê´€ë¦¬ í˜ì´ì§€
- [x] API í‚¤ ì„¤ì •/ë³€ê²½/ì‚­ì œ ê¸°ëŠ¥
- [x] ì„œë¹„ìŠ¤ í™œì„±í™”/ë¹„í™œì„±í™”
- [x] ì—°ê²° í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥
- [x] ë¼ì´íŠ¸/ë‹¤í¬ ëª¨ë“œ ëŒ€ì‘
- [x] ìƒ‰ìƒ ëŒ€ë¹„ ë¬¸ì œ í•´ê²° (í°ë°”íƒ• í°ê¸€ì”¨ ìˆ˜ì •)

### X.5 ì‹¤í—˜ ë””ìì¸ í˜ì´ì§€ âœ…
- [x] test-design.html ë…ë¦½ í˜ì´ì§€ ìƒì„±
- [x] test-design.css ê·¸ë¼ë°ì´ì…˜ + ìœ ë¦¬ ëª¨í”¼ì¦˜ ë””ìì¸
- [x] test-design.js API ì—°ë™ ì™„ë£Œ
- [x] ë©”ì¸ ì•±ê³¼ ë¶„ë¦¬ëœ ë””ìì¸ ì‹¤í—˜ í™˜ê²½

### X.6 ì„œë²„ ì„¤ì • ìˆ˜ì • âœ…
- [x] .env íŒŒì¼ ê²½ë¡œ ëª…ì‹œì  ì§€ì • (server/index.js)
- [x] Vite í”„ë¡ì‹œ í¬íŠ¸ ìˆ˜ì • (4000 â†’ 3000)
- [x] MongoDB ì¬ì‹œì‘ ë° ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
- [x] ëª¨ë“  ì„œë¹„ìŠ¤ ì •ìƒ ì‘ë™ í™•ì¸

### X.7 AI ì„œë¹„ìŠ¤ ê´€ë¦¬ UI âœ…
- [x] AIServiceManager í´ë˜ìŠ¤ êµ¬í˜„
- [x] ì„œë¹„ìŠ¤ ëª©ë¡ ë¡œë“œ API ì—°ë™
- [x] API í‚¤ ì„¤ì • í”„ë¡¬í”„íŠ¸
- [x] í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€
- [x] ì—°ê²° í…ŒìŠ¤íŠ¸ ë²„íŠ¼
- [x] ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸

### X.8 ì‚¬ìš©ì ì„¤ì • ì˜êµ¬ ì €ì¥ âœ…
- [x] í…Œë§ˆ ì„¤ì • MongoDB ì €ì¥
- [x] 2ì¤‘ ì €ì¥ ì‹œìŠ¤í…œ (localStorage + MongoDB)
- [x] ThemeManager ì„œë²„ ì—°ë™
- [x] í”„ë¡œí•„ ìë™ ìƒì„±

### X.9 Claude Code ì–¸ì–´ ì„¤ì • âœ…
- [x] .claude/settings.local.json í•œêµ­ì–´
- [x] Compact í›„ì—ë„ í•œêµ­ì–´ ìœ ì§€
- [x] ê¶Œí•œ ì„¤ì • ì˜êµ¬ ë³´ì¡´

### X.10 ë¦¬íŒ©í† ë§ ì„±ê³¼ âœ…
**Before (ë³µì¡)**:
```
AIService â†’ apiKeyRef â†’ APIKey â†’ encryptedKey
í™˜ê²½ë³€ìˆ˜ â†’ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ â†’ DB ì €ì¥ â†’ í•˜ë“œì½”ë”© UI
```

**After (ë‹¨ìˆœ)**:
```
AIService â†’ apiKey (ì§ì ‘ ì €ì¥)
í™˜ê²½ë³€ìˆ˜ â†’ ì´ˆê¸°ê°’ë§Œ ì‚¬ìš©
UI â†’ API â†’ DB (ì§ì ‘ ì €ì¥/ì¡°íšŒ)
```

**ê²°ê³¼**: ì½”ë“œ 50% ê°ì†Œ, ê°€ë…ì„± í–¥ìƒ, UIì—ì„œ ëª¨ë“  ê´€ë¦¬ ê°€ëŠ¥

### X.11 ìƒì„±/ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡ âœ…
**ë°±ì—”ë“œ**:
- `/soul/models/AIService.js` - apiKey ì§ì ‘ ì €ì¥ êµ¬ì¡°
- `/soul/models/Memory.js` - ì¥ê¸° ë©”ëª¨ë¦¬ ëª¨ë¸ ìƒì„±
- `/soul/routes/ai-services.js` - APIKey ì˜ì¡´ì„± ì œê±°
- `/soul/server/index.js` - .env ê²½ë¡œ ìˆ˜ì •
- `/soul/scripts/migrate-api-keys.js` - ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
- `/soul/scripts/update-role-models.js` - ëª¨ë¸ ID ì—…ë°ì´íŠ¸

**í”„ë¡ íŠ¸ì—”ë“œ**:
- `/client/src/utils/ai-service-manager.js` - ìƒˆ ê´€ë¦¬ í´ë˜ìŠ¤
- `/client/src/styles/ai-service-manager.css` - ì‹¬í”Œ ë””ìì¸
- `/client/src/utils/menu-manager.js` - ë™ì  UI ì „í™˜
- `/client/vite.config.js` - í”„ë¡ì‹œ í¬íŠ¸ ìˆ˜ì •

**ì‹¤í—˜ í˜ì´ì§€**:
- `/client/test-design.html` - ë…ë¦½ í…ŒìŠ¤íŠ¸ í˜ì´ì§€
- `/client/src/styles/test-design.css` - ì‹¤í—˜ ë””ìì¸
- `/client/src/test-design.js` - API ì—°ë™

**ë¬¸ì„œ**:
- `/WORK_LOG.md` - ìƒì„¸ ì‘ì—… ë¡œê·¸

### X.12 í–¥í›„ ê°œì„  ì‚¬í•­
- [ ] API í‚¤ ì•”í˜¸í™” êµ¬í˜„ (í˜„ì¬ í‰ë¬¸ ì €ì¥)
- [ ] ëª¨ë‹¬ ëŒ€ì‹  ì¸ë¼ì¸ í¸ì§‘ UI
- [ ] API í‚¤ ë§ˆìŠ¤í‚¹ í‘œì‹œ (â€¢â€¢â€¢â€¢â€¢â€¢)
- [ ] ì„œë¹„ìŠ¤ë³„ ì‚¬ìš© í†µê³„ í‘œì‹œ
- [ ] test-design.htmlì„ ë©”ì¸ ì•±ìœ¼ë¡œ ì „í™˜


-----------


## ğŸ“š ê°œë°œ ë ˆí¼ëŸ°ìŠ¤ + ì¤‘ìš”ë©”ëª¨

### ğŸ—‚ï¸ í´ë” êµ¬ì¡°
```
/workspaces/.soul/
â”œâ”€â”€ soul/               # ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ models/        # MongoDB ëª¨ë¸
â”‚   â”œâ”€â”€ routes/        # API ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ utils/         # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ config/
â”‚   â””â”€â”€ memory/
â”œâ”€â”€ client/            # í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ memory/            # ë©”ëª¨ë¦¬ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ raw/          # YYYY-MM-DD_HHmmss_ì£¼ì œ.md
â”‚   â”œâ”€â”€ processed/
â”‚   â””â”€â”€ index.json
â”œâ”€â”€ files/            # íŒŒì¼ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ uploads/
â”‚   â””â”€â”€ processed/
â”œâ”€â”€ mcp/              # MCP ì„œë²„ë“¤
â”‚   â”œâ”€â”€ hub-server.js
â”‚   â””â”€â”€ tools/
â”œâ”€â”€ docs/             # ë¬¸ì„œ
â”œâ”€â”€ install.sh
â””â”€â”€ README.md
```

### ğŸ”‘ í™˜ê²½ë³€ìˆ˜ (.env)
```bash
# MongoDB
MONGODB_URI=mongodb://localhost:27017/soul

# ê²½ë¡œ
MEMORY_PATH=/path/to/memory
FILES_PATH=/path/to/files
MCP_PATH=/path/to/mcp

# AI API Keys
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
GOOGLE_API_KEY=
XAI_API_KEY=

# ì•”í˜¸í™”
ENCRYPTION_KEY=

# ì„œë²„
PORT=3000
JWT_SECRET=
```

### ğŸ›£ï¸ API ì—”ë“œí¬ì¸íŠ¸

#### ë©”ëª¨ë¦¬ (Phase 1)
- `POST /api/memory/archive` - ëŒ€í™” ì €ì¥

#### AI ë¶„ë¥˜ (Phase 2)
- `GET /api/ai-models/services` - AI ì„œë¹„ìŠ¤ ëª©ë¡
- `POST /api/ai-models/test` - AI ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸
- `GET /api/config/ai` - AI ì„¤ì • ì¡°íšŒ
- `PATCH /api/config/ai` - AI ì„¤ì • ë³€ê²½

#### ê²€ìƒ‰ (Phase 3)
- `GET /api/search` - ê¸°ë³¸ ê²€ìƒ‰
- `POST /api/search/advanced` - ê³ ê¸‰ ê²€ìƒ‰
- `GET /api/search/tags` - íƒœê·¸ ëª©ë¡
- `GET /api/search/categories` - ì¹´í…Œê³ ë¦¬ ëª©ë¡
- `GET /api/search/stats` - í†µê³„
- `POST /api/search/smart` - ì§€ëŠ¥í˜• ê²€ìƒ‰
- `GET /api/search/similar/:id` - ìœ ì‚¬ ëŒ€í™”
- `GET /api/search/graph` - ê´€ê³„ ê·¸ë˜í”„
- `GET /api/search/recommendations` - ì¶”ì²œ
- `POST /api/search/by-tags` - íƒœê·¸ ê²€ìƒ‰

#### ì»¨í…ìŠ¤íŠ¸ (Phase 4)
- `POST /api/context/detect` - ë§¥ë½ ê°ì§€
- `POST /api/context/extract-keywords` - í‚¤ì›Œë“œ ì¶”ì¶œ
- `POST /api/context/evaluate-trigger` - íŠ¸ë¦¬ê±° í‰ê°€
- `POST /api/context/find-memories` - ë©”ëª¨ë¦¬ ê²€ìƒ‰
- `POST /api/context/generate-prompt` - í”„ë¡¬í”„íŠ¸ ìƒì„±
- `POST /api/context/check-spam` - ìŠ¤íŒ¸ ë°©ì§€

#### ë¹„ìœ  (Phase 4)
- `POST /api/analogy/analyze` - ë¹„ìœ  ë¶„ì„
- `POST /api/analogy/find` - ë¹„ìœ  ê²€ìƒ‰
- `POST /api/analogy/detect-patterns` - íŒ¨í„´ ê°ì§€
- `POST /api/analogy/should-activate` - í™œì„±í™” ì²´í¬
- `GET /api/analogy/config` - ì„¤ì • ì¡°íšŒ
- `PATCH /api/analogy/config` - ì„¤ì • ë³€ê²½

#### ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ (Phase 5)
- `POST /api/context-mgmt/analyze` - í† í° ë¶„ì„
- `POST /api/context-mgmt/estimate-tokens` - í† í° ì¶”ì •
- `POST /api/context-mgmt/compress` - ì••ì¶•
- `POST /api/context-mgmt/should-compress` - ì••ì¶• í•„ìš” ì²´í¬
- `POST /api/context-mgmt/session-summary` - ì„¸ì…˜ ìš”ì•½
- `GET /api/context-mgmt/restore/:id` - ì„¸ì…˜ ë³µì›
- `GET /api/context-mgmt/config` - ì„¤ì • ì¡°íšŒ
- `PATCH /api/context-mgmt/config` - ì„¤ì • ë³€ê²½
- `GET /api/context-mgmt/model-limits` - ëª¨ë¸ ì œí•œ

#### ëŒ€í™” (Phase 5.4)
- `POST /api/chat` - ë©”ì‹œì§€ ì „ì†¡
- `POST /api/chat/resume` - ì„¸ì…˜ ì¬ê°œ
- `POST /api/chat/end` - ì„¸ì…˜ ì¢…ë£Œ
- `GET /api/chat/sessions` - í™œì„± ì„¸ì…˜
- `GET /api/chat/memory-stats` - ë©”ëª¨ë¦¬ í†µê³„
- `GET /api/chat/token-status` - í† í° ìƒíƒœ
- `POST /api/chat/compress` - ìˆ˜ë™ ì••ì¶•

#### ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ… (Phase 8)
- `POST /api/chat/analyze-task` - íƒœìŠ¤í¬ ë¶„ì„
- `GET /api/chat/routing-stats` - ë¼ìš°íŒ… í†µê³„
- `GET /api/chat/models` - ëª¨ë¸ ëª©ë¡
- `GET /api/chat/personality` - ì¸ê²© ì •ë³´
- `POST /api/chat/personality/preference` - ì„ í˜¸ë„ ì„¤ì •

#### AI ì„œë¹„ìŠ¤ (Phase X)
- `POST /api/config/api-key` - API í‚¤ ì €ì¥
- `GET /api/config/api-key/:service` - API í‚¤ í™•ì¸
- `DELETE /api/config/api-key/:service` - API í‚¤ ì‚­ì œ
- `GET /api/ai-services` - ì„œë¹„ìŠ¤ ëª©ë¡
- `GET /api/ai-services/:id` - ì„œë¹„ìŠ¤ ìƒì„¸
- `POST /api/ai-services` - ì„œë¹„ìŠ¤ ì¶”ê°€
- `PATCH /api/ai-services/:id` - ì„œë¹„ìŠ¤ ìˆ˜ì •
- `DELETE /api/ai-services/:id` - ì„œë¹„ìŠ¤ ì‚­ì œ
- `POST /api/ai-services/:id/toggle` - í™œì„±í™” í† ê¸€
- `POST /api/ai-services/:id/refresh-models` - ëª¨ë¸ ê°±ì‹ 
- `POST /api/ai-services/:id/test` - ì—°ê²° í…ŒìŠ¤íŠ¸
- `GET /api/config/models/:service` - ëª¨ë¸ ëª©ë¡
- `POST /api/config/ai/default` - ê¸°ë³¸ ëª¨ë¸ ì €ì¥
- `POST /api/config/api-key/validate` - API í‚¤ ê²€ì¦

#### í”„ë¡œí•„ (Phase X)
- `GET /api/profile/user/:userId` - í”„ë¡œí•„ ì¡°íšŒ
- `PUT /api/profile/user/:userId` - í”„ë¡œí•„ ì—…ë°ì´íŠ¸
- `GET /api/profile/user/:userId/theme` - í…Œë§ˆ ì¡°íšŒ
- `PATCH /api/profile/user/:userId/theme` - í…Œë§ˆ ì €ì¥

#### í”„ë¡œí•„ ì‹œìŠ¤í…œ (Phase P)
- `GET /api/profile/p` - ì „ì²´ í”„ë¡œí•„ ì¡°íšŒ
- `GET /api/profile/p/summary` - í”„ë¡œí•„ ìš”ì•½ (scope: full/limited/minimal)
- `GET /api/profile/p/detail/:fieldId` - íŠ¹ì • í•„ë“œ ìƒì„¸
- `POST /api/profile/p/fields` - í•„ë“œ ì¶”ê°€
- `PUT /api/profile/p/fields/:id` - í•„ë“œ ìˆ˜ì •
- `DELETE /api/profile/p/fields/:id` - í•„ë“œ ì‚­ì œ
- `PUT /api/profile/p/fields/reorder` - í•„ë“œ ìˆœì„œ ë³€ê²½
- `GET /api/profile/p/permissions` - ê¶Œí•œ ì¡°íšŒ
- `PATCH /api/profile/p/permissions` - ê¶Œí•œ ìˆ˜ì •

### ğŸ“¦ ì£¼ìš” íŒŒì¼

#### MongoDB ëª¨ë¸
- `soul/models/APIKey.js` - API í‚¤ ì•”í˜¸í™”
- `soul/models/AIService.js` - AI ì„œë¹„ìŠ¤
- `soul/models/UserProfile.js` - ì‚¬ìš©ì í”„ë¡œí•„

#### ìœ í‹¸ë¦¬í‹°
- `soul/utils/ai-service.js` - AI ì„œë¹„ìŠ¤ íŒ©í† ë¦¬
- `soul/utils/search.js` - ê²€ìƒ‰ ì—”ì§„
- `soul/utils/smart-search.js` - ì§€ëŠ¥í˜• ê²€ìƒ‰
- `soul/utils/recommendation.js` - ì¶”ì²œ ì‹œìŠ¤í…œ
- `soul/utils/context-detector.js` - ë§¥ë½ ê°ì§€
- `soul/utils/analogy-finder.js` - ë¹„ìœ  ì°¾ê¸°
- `soul/utils/token-counter.js` - í† í° ê³„ì‚°
- `soul/utils/context-compressor.js` - ì»¨í…ìŠ¤íŠ¸ ì••ì¶•
- `soul/utils/conversation-pipeline.js` - ëŒ€í™” ì²˜ë¦¬
- `soul/utils/token-safeguard.js` - í† í° í­ë°œ ë°©ì§€
- `soul/utils/agent-chain.js` - ì—ì´ì „íŠ¸ ì²´ì´ë‹
- `soul/utils/memory-layers.js` - ë©”ëª¨ë¦¬ ê³„ì¸µ
- `soul/utils/session-continuity.js` - ì„¸ì…˜ ì—°ì†ì„±
- `soul/utils/smart-router.js` - ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ…
- `soul/utils/personality-core.js` - ë‹¨ì¼ ì¸ê²©

#### í”„ë¡ íŠ¸ì—”ë“œ
- `client/src/utils/menu-manager.js` - í–„ë²„ê±° ë©”ë‰´
- `client/src/utils/panel-manager.js` - íŒ¨ë„ ì‹œìŠ¤í…œ
- `client/src/utils/theme-manager.js` - í…Œë§ˆ ê´€ë¦¬
- `client/src/main.js` - ë©”ì¸ ì—”íŠ¸ë¦¬

### ğŸ” ì•”í˜¸í™”
- **ì•Œê³ ë¦¬ì¦˜**: AES-256-CBC
- **í™˜ê²½ë³€ìˆ˜**: `ENCRYPTION_KEY`
- **ì €ì¥**: MongoDB `APIKey` ì»¬ë ‰ì…˜

### ğŸ—„ï¸ MongoDB ì»¬ë ‰ì…˜
- `apikeys` - ì•”í˜¸í™”ëœ API í‚¤
- `aiservices` - AI ì„œë¹„ìŠ¤ ì„¤ì •
- `userprofiles` - ì‚¬ìš©ì í”„ë¡œí•„ & í…Œë§ˆ
- `conversations` - ëŒ€í™” ë©”íƒ€ë°ì´í„°
- `memories` - ì¥ê¸° ë©”ëª¨ë¦¬ (Phase 5.4)

### ğŸ“ conversationId
- **ê³ ì •ê°’**: `'main-conversation'`
- **ìš©ë„**: ë‹¨ì¼ ì˜ì† ëŒ€í™”ë°©

### ğŸ¨ í…Œë§ˆ ì €ì¥
- **localStorage**: ì¦‰ì‹œ ë³µì›
- **MongoDB**: ë‹¤ë¥¸ ê¸°ê¸° ë™ê¸°í™”
- **API**: `PATCH /api/profile/user/:userId/theme`

**ë¼ìš°íŒ… ë¡œì§**:
- complexity â‰¥ 7 OR requiresExpertise â†’ ê³ ì„±ëŠ¥ ëª¨ë¸ (ì˜ˆ: Opus, GPT-4, Gemini Pro)
- complexity â‰¤ 3 AND NOT requiresReasoning â†’ ê²½ëŸ‰ ëª¨ë¸ (ì˜ˆ: Haiku, GPT-3.5, Gemini Flash)
- else â†’ ì¤‘ê°„ ëª¨ë¸ (ì˜ˆ: Sonnet, GPT-4o, Gemini Pro)

**íƒœìŠ¤í¬ ìœ í˜•ë³„ ë³µì¡ë„**:
- ê²½ëŸ‰ (1-2): ê°„ë‹¨í•œ ì§ˆë¬¸, ë²ˆì—­, ìš”ì•½
- ì¤‘ê°„ (4-6): ì½”ë“œ ìƒì„±, ë¦¬ë·°, ë¶„ì„, ë¬¸ì œ í•´ê²°
- ê³ ì„±ëŠ¥ (7-9): ì•„í‚¤í…ì²˜ ì„¤ê³„, ë³µì¡í•œ ë””ë²„ê¹…, ì—°êµ¬, ì „ë¬¸ ì»¨ì„¤íŒ…

**ì‚¬ìš©ì ì„¤ì •**:
- ê° ë³µì¡ë„ ë²”ìœ„ì— ì‚¬ìš©í•  ëª¨ë¸ì„ AI ì„¤ì •ì—ì„œ ì„ íƒ ê°€ëŠ¥
- ì œê³µì‚¬ ìƒê´€ì—†ì´ ì›í•˜ëŠ” ëª¨ë¸ ì¡°í•©ìœ¼ë¡œ êµ¬ì„±
